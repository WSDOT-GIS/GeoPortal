define(["esri/geometry/Extent","esri/graphic","esri/InfoTemplate","esri/geometry/webMercatorUtils","esri/layers/FeatureLayer","esri/SpatialReference","dojo/_base/lang","dojo/Evented","esri/toolbars/draw","esri/layers/GraphicsLayer","esri/geometry/Geometry","esri/Color","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleMarkerSymbol","esri/symbols/TextSymbol","dijit/form/Button","esri/dijit/LayerList","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/dijit/Search","esri/geometry/Point","esri/geometry/Polygon","esri/dijit/BasemapGallery","esri/dijit/BasemapLayer"],function(e,t,r,n,a,o,i,s,u,l,c,f,d,p,y,h,v,m,b,g,w,_,x,L,O){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9)}([function(e,t,r){"use strict";r.r(t),r.d(t,"__extends",function(){return a}),r.d(t,"__assign",function(){return o}),r.d(t,"__rest",function(){return i}),r.d(t,"__decorate",function(){return s}),r.d(t,"__param",function(){return u}),r.d(t,"__metadata",function(){return l}),r.d(t,"__awaiter",function(){return c}),r.d(t,"__generator",function(){return f}),r.d(t,"__exportStar",function(){return d}),r.d(t,"__values",function(){return p}),r.d(t,"__read",function(){return y}),r.d(t,"__spread",function(){return h}),r.d(t,"__await",function(){return v}),r.d(t,"__asyncGenerator",function(){return m}),r.d(t,"__asyncDelegator",function(){return b}),r.d(t,"__asyncValues",function(){return g}),r.d(t,"__makeTemplateObject",function(){return w}),r.d(t,"__importStar",function(){return _}),r.d(t,"__importDefault",function(){return x});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function a(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function i(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r}function s(e,t,r,n){var a,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}function u(e,t){return function(r,n){t(r,n,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(i,s)}u((n=n.apply(e,t||[])).next())})}function f(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}function p(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function y(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function m(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,a=r.apply(e,t||[]),o=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(e){a[e]&&(n[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||s(e,t)})})}function s(e,t){try{(r=a[e](t)).value instanceof v?Promise.resolve(r.value.v).then(u,l):c(o[0][2],r)}catch(e){c(o[0][3],e)}var r}function u(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function b(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,a){t[n]=e[n]?function(t){return(r=!r)?{value:v(e[n](t)),done:"return"===n}:a?a(t):t}:a}}function g(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,a){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,a,(t=e[r](t)).done,t.value)})}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function x(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.name=e,this.definition=t.definition}return e.prototype.toClassName=function(){return this.name.replace("_","-").toLowerCase()},e.prototype.createDrawUIButton=function(){var e=document.createElement("button");e.type="button",e.value=this.name,e.title=this.definition,e.disabled="TEXT"===this.name,e.classList.add(this.toClassName());var t=document.createElement("span");t.classList.add("icon"),e.appendChild(t);var r=document.createElement("span");return r.classList.add("label"),r.textContent=this.toClassName(),e.appendChild(r),e},e}();t.DrawingOperation=n;var a=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=new n(r,e[r]));return t}({TEXT:{definition:"Adds a text label"},POINT:{definition:"Draws a point."},MULTI_POINT:{definition:"Draws a Multipoint."},LINE:{definition:"Draws a line."},POLYLINE:{definition:"Draws a polyline."},FREEHAND_POLYLINE:{definition:"Draws a freehand polyline."},POLYGON:{definition:"Draws a polygon."},FREEHAND_POLYGON:{definition:"Draws a freehand polygon."},CIRCLE:{definition:"Draws a circle."},EXTENT:{definition:"Draws an extent box."},RECTANGLE:{definition:"Draws a rectangle."},ELLIPSE:{definition:"Draws an ellipse."},TRIANGLE:{definition:"Draws a triangle."},ARROW:{definition:"Draws an arrow."},UP_ARROW:{definition:"Draws an arrow that points up."},LEFT_ARROW:{definition:"Draws an arrow that points left."},RIGHT_ARROW:{definition:"Draws an arrow that points right."},DOWN_ARROW:{definition:"Draws an arrow that points down."},CLEAR:{definition:"Deletes the user-drawn graphics."}});t.drawingOperations=a;var o=function(){return function(e){this.root=e;var t=this.root;t.classList.add("draw-ui");var r=document.createDocumentFragment();for(var n in a)if(a.hasOwnProperty(n)){var o=a[n].createDrawUIButton();r.appendChild(o)}t.appendChild(r);var i=document.createElement("input");i.type="text",i.name="label",i.placeholder="label for text goes here";var s=t.querySelector("button[value='TEXT']");i.addEventListener("change",function(){s.disabled=!Boolean(this.value)}),t.insertBefore(i,t.firstChild)}}();t.default=o},function(t,r){t.exports=e},function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(r(1)),s=r(12),u=r(13),l=r(14),c=r(15),f=r(4),d=r(16),p=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===arguments.length)this.point=arguments[0].point,this.line=arguments[0].line,this.polygon=arguments[0].polygon,this.text=arguments[0].text;else{if(4!==arguments.length)throw TypeError("Invalid number of arguments.");this.point=arguments[0],this.line=arguments[1],this.polygon=arguments[2],this.text=arguments[3]}}return e.prototype.getSymbol=function(e){var t,r;return e&&(e instanceof f&&e.geometry?t=e.geometry:e instanceof d&&e.type&&(t=e)),t&&(r=/\w*point/i.test(t.type)?this.point:/\w*line/i.test(t.type)?this.line:this.polygon),r},e}();t.SymbolOptions=p;var y=function(e){function t(t,r,n,a){var o=e.call(this)||this;o.symbols=n;var u=o;function d(){for(var e=r.querySelectorAll("button.active"),t=0,n=e.length;t<n;t+=1)e[t].classList.remove("active")}var y=function(){var e=this.value;e&&("CLEAR"===e?window.confirm("Are you sure you want to delete all of your drawn features?")&&h.clear():(t.setInfoWindowOnClick(!1),"TEXT"===e?(v.activate(l.POINT),u.emit("draw-activate",{})):(v.activate(l[e]),u.emit("draw-activate",{})),d(),this.classList.add("active")))};a||(a={}),!n||n instanceof p||(n=new p(n)),o.symbols=n||null,a.id=a.id||"drawnFeatures",a.styling=!!o.symbols||Boolean(a.styling),a.className=a.className||"drawn-features",a.dataAttributes=a.dataAttributes||"geometry-type";var h=new c(a);o.layer=h,t.addLayer(h);var v=new l(t);o.draw=v,v.on("draw-complete",function(e){this.deactivate(),u.emit("draw-complete",e),t.setInfoWindowOnClick(!0);var a=new f(e.geometry,n?function(){var e=null;if(r.querySelector("button.text.active")){e=s.clone(n.text);var t=r.querySelector("input[name='label']");e.setText(t?t.value:"")}return e}()||n.getSymbol(e.geometry):void 0,{"geometry-type":e.geometry.type});h.add(a),d()});for(var m=new i.default(r).root.querySelectorAll("button"),b=0,g=m.length;b<g;b+=1)m[b].addEventListener("click",y);return o}return a(t,e),t}(u);t.default=y},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=a},function(e,t){e.exports=o},function(e,t,r){var n,a;n=[r,t,r(0),r(10),r(22),r(26),r(37),r(39),r(43)],void 0===(a=function(e,t,r,n,a,o,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),u=r.__importDefault(u),r.__exportStar(n,t),r.__exportStar(a,t),r.__exportStar(o,t),r.__exportStar(i,t),r.__exportStar(s,t),t.setupBasemapGallery=u.default}.apply(t,n))||(e.exports=a)},function(e,t,r){var n,a;n=[r,t,r(0),r(11),r(17),r(5),r(18),r(19),r(20),r(21)],void 0===(a=function(e,t,r,n,a,o,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a),o=r.__importDefault(o),i=r.__importDefault(i),s=r.__importDefault(s),u=r.__importDefault(u),l=r.__importDefault(l),t.setupDrawUI=function(e){var t,r=document.getElementById("drawUI");if(r){var c=new s.default,f=new u.default,d=new i.default,p=new l.default("Default Label"),y=new a.default("red");c.setColor(y).setWidth(2),f.setOutline(c),d.setOutline(c),p.setColor(y);var h=new n.SymbolOptions(f,c,d,p);(t=new n.DrawUIHelper(e,r,h,{id:"Drawn Features",infoTemplate:new o.default("Drawn Graphic",function(r){var n=document.createElement("button");return n.type="button",n.textContent="Delete",n.title="Delete this graphic",n.graphic=r,n.classList.add("delete-graphic-button"),n.onclick=function(){this.graphic&&(e.infoWindow.hide(),t.layer.remove(this.graphic))},n})})).on("draw-activate",function(){e.setInfoWindowOnClick(!1)}),t.on("draw-complete",function(){e.setInfoWindowOnClick(!0)})}}}.apply(t,n))||(e.exports=a)},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(r(1)),n(r(3));var o=a(r(1));t.DrawUI=o.default;var i=a(r(3));t.DrawUIHelper=i.default},function(e,t){e.exports=i},function(e,t){e.exports=s},function(e,t){e.exports=u},function(e,t){e.exports=l},function(e,t){e.exports=c},function(e,t){e.exports=f},function(e,t){e.exports=d},function(e,t){e.exports=p},function(e,t){e.exports=y},function(e,t){e.exports=h},function(e,t,r){var n,a;n=[r,t,r(23),r(24)],void 0===(a=function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupExportButton=function(e){var t=document.getElementById("toolbar");if(!t)throw new Error("Could not find #toolbar element.");var a=document.createElement("button");a.id="exportButton",a.type="button",a.textContent="Export",a.title="Export graphics",a.classList.add("export-button"),t.appendChild(a),new r({label:"Export Graphics",showLabel:!1,iconClass:"dijitEditorIcon dijitEditorIconSave",onClick:function(){var t=e.graphicsLayerIds.map(function(t){return e.getLayer(t)}).filter(function(e){return e.graphics.length>0}).map(n.layerToGeoJsonFeatureCollection);if(t.length<1)alert("No features to export");else{var r=JSON.stringify(t);localStorage.setItem("geoportal_export",r),window.open("./export/","_blank")}}},a.id).startup()}}.apply(t,n))||(e.exports=a)},function(e,t){e.exports=v},function(e,t,r){var n,a;n=[r,t,r(0),r(25),r(6),r(7)],void 0===(a=function(e,t,r,n,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),t.layerToGeoJsonFeatureCollection=function(e){var t=e.graphics.map(function(e){var t=e.clone(),r=a.webMercatorToGeographic(e.geometry);return t.geometry=r,n.arcgisToGeoJSON(t)});return{layerid:e.id,type:"FeatureCollection",features:t}},t.getMapFeatures=function(e){var t,n,a,i,s,u,l;return r.__generator(this,function(c){switch(c.label){case 0:c.trys.push([0,7,8,9]),a=r.__values(e.layerIds),i=a.next(),c.label=1;case 1:return i.done?[3,6]:(s=i.value,(u=e.getLayer(s)).graphics.length<0?[3,5]:u instanceof o.default?[4,u.toJson()]:[3,3]);case 2:return c.sent(),[3,5];case 3:return[4,u.graphics.map(function(e){return e.toJson()})];case 4:c.sent(),c.label=5;case 5:return i=a.next(),[3,1];case 6:return[3,9];case 7:return l=c.sent(),t={error:l},[3,9];case 8:try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}return[7];case 9:return[2]}})}}.apply(t,n))||(e.exports=a)},function(e,t,r){"use strict";function n(e){return function(e,t){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(e[0],e[e.length-1])||e.push(e[0]),e}function a(e){for(var t,r=0,n=0,a=e.length,o=e[n];n<a-1;n++)r+=((t=e[n+1])[0]-o[0])*(t[1]+o[1]),o=t;return r>=0}function o(e,t,r,n){var a=(n[0]-r[0])*(e[1]-r[1])-(n[1]-r[1])*(e[0]-r[0]),o=(t[0]-e[0])*(e[1]-r[1])-(t[1]-e[1])*(e[0]-r[0]),i=(n[1]-r[1])*(t[0]-e[0])-(n[0]-r[0])*(t[1]-e[1]);if(0!==i){var s=a/i,u=o/i;if(s>=0&&s<=1&&u>=0&&u<=1)return!0}return!1}function i(e,t){for(var r=0;r<e.length-1;r++)for(var n=0;n<t.length-1;n++)if(o(e[r],e[r+1],t[n],t[n+1]))return!0;return!1}function s(e,t){var r=i(e,t),n=function(e,t){for(var r=!1,n=-1,a=e.length,o=a-1;++n<a;o=n)(e[n][1]<=t[1]&&t[1]<e[o][1]||e[o][1]<=t[1]&&t[1]<e[n][1])&&t[0]<(e[o][0]-e[n][0])*(t[1]-e[n][1])/(e[o][1]-e[n][1])+e[n][0]&&(r=!r);return r}(e,t[0]);return!(r||!n)}function u(e){var t=[],r=e.slice(0),o=n(r.shift().slice(0));if(o.length>=4){a(o)||o.reverse(),t.push(o);for(var i=0;i<r.length;i++){var s=n(r[i].slice(0));s.length>=4&&(a(s)&&s.reverse(),t.push(s))}}return t}function l(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function c(e,t){var r={};if(e.features){r.type="FeatureCollection",r.features=[];for(var o=0;o<e.features.length;o++)r.features.push(c(e.features[o],t))}if("number"==typeof e.x&&"number"==typeof e.y&&(r.type="Point",r.coordinates=[e.x,e.y],"number"==typeof e.z&&r.coordinates.push(e.z)),e.points&&(r.type="MultiPoint",r.coordinates=e.points.slice(0)),e.paths&&(1===e.paths.length?(r.type="LineString",r.coordinates=e.paths[0].slice(0)):(r.type="MultiLineString",r.coordinates=e.paths.slice(0))),e.rings&&(r=function(e){for(var t,r,o=[],u=[],l=0;l<e.length;l++){var c=n(e[l].slice(0));if(!(c.length<4))if(a(c)){var f=[c.slice().reverse()];o.push(f)}else u.push(c.slice().reverse())}for(var d=[];u.length;){r=u.pop();var p=!1;for(t=o.length-1;t>=0;t--)if(s(o[t][0],r)){o[t].push(r),p=!0;break}p||d.push(r)}for(;d.length;){r=d.pop();var y=!1;for(t=o.length-1;t>=0;t--)if(i(o[t][0],r)){o[t].push(r),y=!0;break}y||o.push([r.reverse()])}return 1===o.length?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}(e.rings.slice(0))),"number"==typeof e.xmin&&"number"==typeof e.ymin&&"number"==typeof e.xmax&&"number"==typeof e.ymax&&(r.type="Polygon",r.coordinates=[[[e.xmax,e.ymax],[e.xmin,e.ymax],[e.xmin,e.ymin],[e.xmax,e.ymin],[e.xmax,e.ymax]]]),(e.geometry||e.attributes)&&(r.type="Feature",r.geometry=e.geometry?c(e.geometry):null,r.properties=e.attributes?l(e.attributes):null,e.attributes))try{r.id=function(e,t){for(var r=t?[t,"OBJECTID","FID"]:["OBJECTID","FID"],n=0;n<r.length;n++){var a=r[n];if(a in e&&("string"==typeof e[a]||"number"==typeof e[a]))return e[a]}throw Error("No valid id attribute found")}(e.attributes,t)}catch(e){}return JSON.stringify(r.geometry)===JSON.stringify({})&&(r.geometry=null),e.spatialReference&&e.spatialReference.wkid&&4326!==e.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),r}function f(e,t){t=t||"OBJECTID";var r,n={wkid:4326},a={};switch(e.type){case"Point":a.x=e.coordinates[0],a.y=e.coordinates[1],a.spatialReference=n;break;case"MultiPoint":a.points=e.coordinates.slice(0),a.spatialReference=n;break;case"LineString":a.paths=[e.coordinates.slice(0)],a.spatialReference=n;break;case"MultiLineString":a.paths=e.coordinates.slice(0),a.spatialReference=n;break;case"Polygon":a.rings=u(e.coordinates.slice(0)),a.spatialReference=n;break;case"MultiPolygon":a.rings=function(e){for(var t=[],r=0;r<e.length;r++)for(var n=u(e[r]),a=n.length-1;a>=0;a--){var o=n[a].slice(0);t.push(o)}return t}(e.coordinates.slice(0)),a.spatialReference=n;break;case"Feature":e.geometry&&(a.geometry=f(e.geometry,t)),a.attributes=e.properties?l(e.properties):{},e.id&&(a.attributes[t]=e.id);break;case"FeatureCollection":for(a=[],r=0;r<e.features.length;r++)a.push(f(e.features[r],t));break;case"GeometryCollection":for(a=[],r=0;r<e.geometries.length;r++)a.push(f(e.geometries[r],t))}return a}r.r(t),r.d(t,"arcgisToGeoJSON",function(){return c}),r.d(t,"geojsonToArcGIS",function(){return f}),t.default={arcgisToGeoJSON:c,geojsonToArcGIS:f}},function(e,t,r){var n,a;n=[r,t,r(0),r(27),r(2),r(8)],void 0===(a=function(e,t,r,n,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n),a=r.__importDefault(a),o=r.__importDefault(o),t.createLayerLink=n.createLayerLink,t.setupLayerList=function(e,t,i){var s=n.fromGeoportalLayers(i),u=s.groups,l=s.layers;if(window.URL&&window.URLSearchParams){var c=new URL(window.location.href);n.setOperationalLayers(c.searchParams,l);var f=c.searchParams.get("map-extent");if(f){var d=r.__read(f.split(/[\s,]+/g).map(function(e){return parseFloat(e)}),4),p=d[0],y=d[1],h=d[2],v=d[3],m=new o.default(4326),b=new a.default(p,y,h,v,m);t.setExtent(b)}}var g=l.filter(function(e){return e.layer}).map(function(e){return e.layer});return g&&g.length&&t.addLayers(g),new n.default({groupProperty:"title",groups:u,layers:l,map:t,metadata:!0,showLegend:!0,showOpacitySlider:!0,showSubLayers:!0,throwOnGroupNotFound:!1},e.id)}}.apply(t,n))||(e.exports=a)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),a=n.__importDefault(r(28)),o=r(29);function i(e,t){var r="string"==typeof e?document.getElementById(e):e;r.id&&(r=document.getElementById(r.id)||r);var a,o=r.querySelectorAll(".esriList > li"),i=function(e){var t=new Map,r=function(r){e.hasOwnProperty(r)&&e[r].forEach(function(e){return t.set(e,r)})};for(var n in e)r(n);return t}(t),s=0,u=new Map;return Array.from(o,function(e){var t=e.querySelector("label");if(t){var r=t.textContent,n=i.get(r)||"Other";if(n!==a){var o="layer-list-group-"+s;u.set(o,n),e.classList.add("layer-list-group-start",o),s++}a=n}}),Array.from(u,function(e){var t=n.__read(e,2);return"."+t[0]+":before { content: '"+t[1]+"' }"}).join("\n")}n.__exportStar(r(31),t),n.__exportStar(r(34),t),t.getGroupsFromCreateMapItem=function(e){if(e.itemData.applicationProperties){var t=e.itemData.applicationProperties;if(t.viewing){var r=t.viewing;if(r.layerGrouping){var n=r.layerGrouping;if(n&&n.enabled&&n.groups)return n.groups}}}return null},t.convertLayer=function(e){var t=e.id,r=e.title,n=e.visibility,a=e.layerObject;return{id:t,title:r,layer:a,visibility:n,showLegend:!0,showOpacitySlider:!0,showSubLayers:!a.layerInfos||a.layerInfos.length>1}};var s=function(e){function t(t,r){var a=this;if(t.groups){var s=t.layers,u=new(Array.bind.apply(Array,n.__spread([void 0],function(e,t,r,a){var o,i,s,u,l,c,f,d,p,y,h,v;return void 0===r&&(r="id"),n.__generator(this,function(m){switch(m.label){case 0:for(u in s=[],e)s.push(u);l=0,m.label=1;case 1:if(!(l<s.length))return[3,10];if(c=s[l],!e.hasOwnProperty(c))return[3,9];f=e[c],d=function(e){var o,i;return n.__generator(this,function(n){switch(n.label){case 0:if(!(o=t.find(function(t){return t[r]===e}))){if(i='No layer found with "'+r+'" of "'+e+'".',a)throw new ReferenceError(i);return console.warn(i),[2,"continue"]}return[4,o];case 1:return n.sent(),[2]}})},m.label=2;case 2:m.trys.push([2,7,8,9]),p=n.__values(f),y=p.next(),m.label=3;case 3:return y.done?[3,6]:(h=y.value,[5,d(h)]);case 4:m.sent(),m.label=5;case 5:return y=p.next(),[3,3];case 6:return[3,9];case 7:return v=m.sent(),o={error:v},[3,9];case 8:try{y&&!y.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}return[7];case 9:return l++,[3,1];case 10:return[2]}})}(t.groups,t.layers,t.groupProperty,t.throwOnGroupNotFound))));s.filter(function(e){return!u.includes(e)}).forEach(function(e){return u.push(e)}),t.layers=u.reverse()}var l="string"===r?r:r instanceof HTMLElement?r.id:null;return(a=e.call(this,t,r)||this)._nodeId=l||"string"==typeof r?r:r.id,t.groups&&a.on("load",function(e){var n=i(r,t.groups),a=document.createElement("style");a.textContent=n,document.head.appendChild(a)}),t.metadata&&o.addMetadataTabs(a,t.metadataFormatterPage||void 0),a}return n.__extends(t,e),Object.defineProperty(t.prototype,"root",{get:function(){return document.getElementById(this._nodeId)},enumerable:!0,configurable:!0}),t}(a.default);t.default=s},function(e,t){e.exports=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),a=r(30),o="https://wsdot-gis.github.io/geospatial-metadata";function i(e,t){return void 0===t&&(t=o),t?t+"?"+("url="+encodeURIComponent(e+"?f=xml")):e}function s(e){var t=e.match(/^([^\.]+)\.([^\.]+)\.([^\.]+)$/i);if(t){var r=n.__read(t,4),a=r[1],o=r[2],i=r[3],s=document.createElement("span"),u=document.createElement("span"),l=document.createElement("span");s.textContent=a,u.textContent=o,l.textContent=i,s.classList.add("metadata-source-name__db"),u.classList.add("metadata-source-name__schema"),l.classList.add("metadata-source-name__table");var c=document.createDocumentFragment();return[s,u,l].forEach(function(e){c.appendChild(e)}),c}return document.createTextNode(e)}t.addMetadataTabs=function(e,t){void 0===t&&(t=o),e.on("load",function(r){var o=r.target.querySelectorAll(".esriTitleContainer > input[type=checkbox]");Array.from(o,function(r){r.addEventListener("click",function(r){if(this.dataset.layerIndex){var o,u=parseInt(this.dataset.layerIndex,10),l=e.layers[u];try{o=this.parentElement.parentElement.nextElementSibling}catch(e){if(!(e instanceof TypeError))throw e}o&&function(e,t,r,o){n.__awaiter(this,void 0,void 0,function(){var u,l,c,f,d,p,y,h,v,m,b;return n.__generator(this,function(n){switch(n.label){case 0:return t&&t.layer&&t.layer.url?(u=t.layer.url,[4,a.detectLayerMetadataSupport(u)]):[2];case 1:return n.sent()?[4,a.getMetadataLinks(u)]:[2];case 2:for(h in l=n.sent(),(c=document.createElement("li")).tabIndex=0,c.dataset.tabId="metadata",c.dataset.layerIndex=r.toString(10),c.setAttribute("role","tab"),c.classList.add("esriTabMenuItem"),c.textContent="Metadata",(f=document.createElement("div")).classList.add("esriTab","metadata-panel"),f.setAttribute("role","tabpanel"),f.dataset.tabId="metadata",d=e.firstElementChild,p=e.children[1],d.appendChild(c),p.appendChild(f),(y=document.createElement("ul")).classList.add("layer-metadata-list"),l)l.hasOwnProperty(h)&&(v=l[h],(m=document.createElement("a")).target="wsdot-metadata",m.href=i(v,o),m.appendChild(s(h)),(b=document.createElement("li")).appendChild(m),y.appendChild(b));return f.appendChild(y),[2]}})})}(o,l,u,t)}},{once:!0,passive:!0})})})}},function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(i,s)}u((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var s="exts/LayerMetadata/validLayers?f=json",u="exts/LayerMetadata/layerSources?f=json",l="exts/LayerMetadata/metadata",c=function(e){function t(t){var r=e.call(this,t.message)||this;return r.errorInfo=t,r.code=t.code,r}return a(t,e),t}(Error);function f(e){return o(this,void 0,void 0,function(){var t;return i(this,function(r){switch(r.label){case 0:return[4,fetch([e,"f=json"].join("?"))];case 1:return[4,r.sent().json()];case 2:if((t=r.sent()).error)throw new c(t.error);return[2,t]}})})}function d(e){return o(this,void 0,void 0,function(){var t;return i(this,function(r){switch(r.label){case 0:return t=[e,u].join("/"),[4,fetch(t)];case 1:return[4,r.sent().json()];case 2:return[2,r.sent()]}})})}t.ArcGisError=c,t.getServiceInfo=f,t.detectLayerMetadataSupport=function(e){return o(this,void 0,void 0,function(){var t;return i(this,function(r){switch(r.label){case 0:return[4,f(e)];case 1:return(t=r.sent()).supportedExtensions?[2,/LayerMetadata/.test(t.supportedExtensions)]:[2,!1]}})})},t.getLayerSources=d,t.getMetadataLinks=function(e,t){return o(this,void 0,void 0,function(){var r,n,a;return i(this,function(o){switch(o.label){case 0:return t?[3,2]:[4,d(e)];case 1:t=o.sent(),o.label=2;case 2:for(a in r=[e,l].join("/"),n={},t)n[a]=[r,t[a][0]].join("/");return[2,n]}})})},t.getValidLayers=function(e){return o(this,void 0,void 0,function(){var t,r;return i(this,function(n){switch(n.label){case 0:return t=[e,s].join("/"),[4,fetch(t)];case 1:return[4,n.sent().json()];case 2:if((r=n.sent()).layerIds)return[2,r.layerIds];throw r.error?new c(r.error):new TypeError("response was not expected type: "+JSON.stringify(r))}})})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),a=n.__importDefault(r(6)),o=r(32);t.setOperationalLayers=function(e,t){var r,a;if(e&&window.URLSearchParams)try{for(var i=n.__values(t),s=i.next();!s.done;s=i.next()){var u=s.value;if(u.id&&e.has(u.id)){var l=e.get(u.id);if(l){var c=o.LayerSettings.parse(l);c?c.apply(u):console.warn('could not parse "'+l+'" into layer settings for layer '+u.id+".")}}}}catch(e){r={error:e}}finally{try{s&&!s.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}},t.createLayerLink=function(e){if(!(window.URL&&window.URLSearchParams&&window.history))throw new Error("Browser must support all of the following features: URL, URLSearchParams, history.");var t=document.createElement("div");t.classList.add("layer-link");var r=document.createElement("a");r.href=new URL(location.href,location.href.replace(/\?.+$/,"")).toString(),r.textContent="ðŸ“‹",r.title="copy URL with layer settings to clipboard",r.target="_blank",r.classList.add("layer-link__anchor"),t.classList.add("layer-link--disabled"),t.appendChild(r);var n=e.map.on("extent-change",function(e){var n=e.extent,o=[(n=a.default.webMercatorToGeographic(n)).xmin,n.ymin,n.xmax,n.ymax].map(function(e){return Math.round(1e4*e)/1e4}).join(" "),i=new URL(r.href);i.searchParams.set("map-extent",o),r.href=i.toString(),t.classList.remove("layer-link--disabled"),t.classList.remove("layer-link--copied")}),i=e.on("toggle",function(n){console.group("LayerList toggle event"),t.classList.remove("layer-link--copied"),t.classList.remove("layer-link--disabled");var a=n.layerIndex,i=n.visible,s=n.subLayerIndex;console.debug("layer: "+a+", sublayer "+s+", visible: "+i);var u=e.layers[a],l=new URL(r.href),c=l.searchParams.get(u.id),f=c?o.LayerSettings.parse(c):null,d=(!!f&&f.visibleLayers,new o.LayerSettings({visible:u.visibility,visibleLayers:u.layer.visibleLayers}));l.searchParams.set(u.id,d.toString()),r.href=l.toString()});return r.onclick=function(e){var n="Could not copy to clipboard. Right-click link and use context menu to copy link.",a=navigator.clipboard;return a&&a.writeText?(a.writeText(r.href).then(function(){t.classList.add("layer-link--copied")},function(e){alert(n)}),!1):(alert(n),!1)},e.map.root.appendChild(t),{layerToggleHandle:i,extentChangeHandle:n,root:t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(33),a=function(){function e(e){e&&(this.visible=e.visible,this.visibleLayers=e.visibleLayers)}return e.parse=function(t){var r,a=n.makeBooleanRe(!0,!1),o=n.makeBooleanRe(!1,!1),i=!!a.test(t)||!o.test(t)&&void 0,s=t.match(/\-?\d+/g);return s&&(r=s.map(function(e){return parseInt(e,10)})),void 0===i&&r&&(i=!0),null===i?null:new e({visible:i,visibleLayers:r})},e.prototype.apply=function(e){var t=e.layer;if(t){var r=t;r.suspend&&r.suspend(),null!=this.visible&&(e.visibility=this.visible,t.setVisibility(this.visible)),!1!==e.showSubLayers&&this.visibleLayers&&r.setVisibleLayers(this.visibleLayers),r.resume&&r.resume()}},e.prototype.toString=function(){var e=null==this.visible?"":this.visible?"âœ“":"â»";return this.visibleLayers?[e].concat(this.visibleLayers.map(function(e){return e.toString(10)})).join(" "):e},e}();t.LayerSettings=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),a=["true","on","âœ“","âœ”","ðŸ—¸","ðŸ—¹","â˜‘","âœ…"],o=["false","off","â»","X"];function i(e,t){var r=e.map(function(e){return"(?:"+e+")"}).join("|");return t&&(r="^(?:"+r+")$"),new RegExp(""+r,"i")}t.makeReGroup=i,t.makeBooleanRe=function(e,t){return i(!0===e?a:!1===e?o:a.concat.apply(a,n.__spread(o)),t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),a=n.__importDefault(r(35)),o=n.__importDefault(r(36));function i(e){var t=e.layerType,r=e.url,n=e.options.id,i=n.replace(/[^a-z0-9]+/gi,"_"),s=e.options.visible||!1;return{id:i,layer:/Tiled/i.test(t)?new o.default(r,{id:i,visible:s}):new a.default(r,{id:i,visible:s}),showLegend:!0,showOpacitySlider:!0,title:n,visibility:s}}t.fromGeoportalLayers=function(e){var t,r;if(Array.isArray(e))return{groups:r,layers:t=e.map(i)};for(var n in t=new Array,r={},e)if(e.hasOwnProperty(n)){var a=e[n].map(i);a.forEach(function(e){return t.push(e)}),r[n]=a.map(function(e){return e.title})}return{groups:r,layers:t}}},function(e,t){e.exports=b},function(e,t){e.exports=g},function(e,t,r){var n,a;n=[r,t,r(0),r(38),r(2),r(7),r(8)],void 0===(a=function(e,t,r,n,a,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSearchControls=function(e,t){var s=document.getElementById("toolbar");if(!s)throw Error("'#toolbar' element not found");var u=document.createElement("div");u.id="search",s.insertBefore(u,s.firstChild);var l=new n({map:e,enableHighlight:!1},u);l.on("load",function(){var e,n,s=l.sources[0];s.countryCode="US";var u,c,f,d=r.__read([-116.91,45.54,-124.79,49.05],4),p=d[0],y=d[1],h=d[2],v=d[3];if(s.searchExtent=new a(h,y,p,v,new i(4326)),t){var m=l.get("sources");try{for(var b=r.__values(function(e){var t,n,a,o,i,s;return r.__generator(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,7]),a=r.__values(Object.keys(e)),o=a.next(),u.label=1;case 1:return o.done?[3,4]:(i=o.value,[4,e[i]]);case 2:u.sent(),u.label=3;case 3:return o=a.next(),[3,1];case 4:return[3,7];case 5:return s=u.sent(),t={error:s},[3,7];case 6:try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}return[7];case 7:return[2]}})}(t)),g=b.next();!g.done;g=b.next()){var w=g.value,_=(c=void 0,f=void 0,c=(u=w).url,u.label,f=u.query,new o(c,{outFields:f.outFields||["*"]})),x={name:w.label,featureLayer:_,searchFields:w.query.outFields,exactMatch:!1};m.push(x)}}catch(t){e={error:t}}finally{try{g&&!g.done&&(n=b.return)&&n.call(b)}finally{if(e)throw e.error}}l.set("sources",m)}}),l.startup()}}.apply(t,n))||(e.exports=a)},function(e,t){e.exports=w},function(e,t,r){var n,a;n=[r,t,r(0),r(40),r(2),r(41),r(42),r(4),r(5)],void 0===(a=function(e,t,r,n,a,o,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a),o=r.__importDefault(o),i=r.__importDefault(i),s=r.__importDefault(s),u=r.__importDefault(u),t.setupFeatureSelects=function(e,t,l){return r.__awaiter(this,void 0,void 0,function(){function c(t){if(t.detail&&t.detail.filter(function(e){return!!e.geometry}).length){var r=t.detail.map(function(t){var r=new s.default(t);return r.setInfoTemplate(p),r.geometry.setSpatialReference(e.spatialReference),r}),n=r[0].geometry,u=e.infoWindow;if(u.setFeatures(r),n instanceof o.default)e.centerAndZoom(n,14),u.show(n);else if(n instanceof a.default)e.setExtent(n,!0),u.show(n.getCenter());else{var l=n;e.setExtent(l.getExtent(),!0),l instanceof i.default?u.show(l.getCentroid()):l.getExtent().getCenter()}this.selectedIndex=0,t.stopPropagation()}}var f,d,p,y,h;return r.__generator(this,function(a){switch(a.label){case 0:if(!e)throw TypeError("map cannot be null or undefined");if(!t||!t.queryTasks)return[2];for(h in f=t.queryTasks,d=new Array,p=new u.default("Zoom",function(e){var t;for(var r in e.attributes)if(e.attributes.hasOwnProperty(r)){t=e.attributes[r];break}return t}),y=function(e){if(f.hasOwnProperty(e)){var t=f[e],a=(t.label,t.url),o=t.query;o.outFields&&(o.orderByFields=o.outFields);var i=function(e,t){var r=new URL(e+"/query?f=json");for(var n in t)if(t.hasOwnProperty(n)){var a=t[n];r.searchParams.append(n,a)}return r}(a,o),s=r.__read(function(e){var t=document.createElement("label");t.textContent=e.label;var r=document.createElement("select"),n=document.createDocumentFragment();return n.appendChild(t),n.appendChild(r),[n,t,r]}(t),3),u=s[0],p=(s[1],s[2]);l.appendChild(u);var y=fetch(i.toString()).then(function(e){return e.json()}).then(function(e){var t=n.createFeatureSelect(p,e);return t.addEventListener("featureselect",c),t.disabled=!1,e});d.push(y)}},f)y(h);return[4,Promise.all(d)];case 1:return[2,a.sent()]}})})}}.apply(t,n))||(e.exports=a)},function(e,t,r){"use strict";function n(e,t){const{geometry:r,attributes:n}=t;return e.dataset.geometry=JSON.stringify(r),e.dataset.attributes=JSON.stringify(n),e}function a(e,t,r){const a=document.createElement("option");if(a.selected=!0,e.appendChild(a),t){const a=function(e,t){const r=document.createDocumentFragment();let{displayFieldName:a}=e;const{features:o,fields:i}=e;t?a=t:a||(a=function(e){if(Array.isArray(e)){for(const t of e)if("esriFieldTypeString"===t.type)return t.name}else for(const t in e)if(e.hasOwnProperty(t)&&"string"==typeof e[t])return t;throw new Error("Could not find string field or attribute.")}(i||o[0].attributes));if(!a)throw new TypeError("Could not determine display field name from feature set.");for(const e of o){const{attributes:t}=e,o=document.createElement("option"),i=t[a];o.label=o.title=o.innerText=i,n(o,e),r.appendChild(o)}return r}(t,r);e.appendChild(a)}return e.addEventListener("change",()=>{const{selectedOptions:t}=e,r=new Array;for(const e of t){const t=e.dataset.geometry?JSON.parse(e.dataset.geometry):null,n={attributes:(e.dataset.attributes?JSON.parse(e.dataset.attributes):null)||{},geometry:t||void 0};r.push(n)}const n=new CustomEvent("featureselect",{detail:r});e.dispatchEvent(n)}),e}r.r(t),r.d(t,"createFeatureSelect",function(){return a})},function(e,t){e.exports=_},function(e,t){e.exports=x},function(e,t,r){var n,a;n=[r,t,r(0),r(44),r(45)],void 0===(a=function(e,t,r,n,a){"use strict";return function(e,t){var o=t.basemaps;o.forEach(function(e){e.layers=e.layers.map(function(e){return new a(e)})});var i=new n({showArcGISBasemaps:!0,map:e,basemaps:o,basemapIds:e.layerIds},"basemapGallery");i.startup(),i.on("load",function(){var e,n,a,o;if(t.basemapsToRemove){var s=void 0,u=function(){var e=new Array;if(t.basemapsToRemove)for(var r=0,n=t.basemapsToRemove.length;r<n;r+=1)for(var a=t.basemapsToRemove[r],o=0,s=i.basemaps.length;o<s;o+=1){var u=i.basemaps[o];if(u.title===a){e.push(u.id);break}}return e}();try{for(var l=r.__values(u),c=l.next();!c.done;c=l.next()){var f=c.value;s=i.remove(f),console&&console.warn&&null===s&&console.warn("Basemap removal failed: basemap not found: "+u)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}}if(t.initialBasemap){var d=void 0;try{for(var p=r.__values(i.basemaps),y=p.next();!y.done;y=p.next()){var h=y.value;if(h.title===t.initialBasemap){d=h;break}}}catch(e){a={error:e}}finally{try{y&&!y.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}d&&i.select(d.id)}}),i.on("basemap gallery error",console.error);var s=$("#legend").data("customLegend");s&&s.setBasemapGallery(i)}}.apply(t,n))||(e.exports=a)},function(e,t){e.exports=L},function(e,t){e.exports=O}])});
//# sourceMappingURL=main.js.map