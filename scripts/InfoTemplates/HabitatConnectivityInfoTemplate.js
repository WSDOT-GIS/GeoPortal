define(["dojo/Deferred","esri/InfoTemplate","esri/request"],function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var r,a;r=[n,t,n(1),n(2),n(3)],void 0===(a=function(e,t,n,r,a){"use strict";var o="http://wsdot-gis.github.io/arcgis-server-attachment-gallery/";var i=["Structure ID","Location Name","Fence ID","Feature Name","State Route ID","Milepost","Beginning Milepost","Ending Milepost","State Route Direction","Fence Height","Fence Material","Post Material","Structure Type","Structure Subtype","Structure Design Function","I-4 Program","Permeability Ranked","Bridge Structure ID","Bridge Number"];function c(e){var t=e.result.displayFieldName,r=e.attributes,c=/^((O(BJECT)?ID(_\d+)?)|(Shape(\.STLength\(\))))$/i,u=document.createElement("table"),l=document.createElement("caption");l.textContent=r[t],u.appendChild(l),u.classList.add("habitat-connectivity");var d=[e.layer.url,e.result.layerId,r.OBJECTID].join("/"),s=document.createElement("tr");u.appendChild(s);var p=document.createElement("th");p.colSpan=2;var f=p,m=document.createElement("progress");m.textContent="Loading attachment data...",f.appendChild(m),function(e){var t=new n,r=[e,"attachments"].join("/");return a({url:r,content:{f:"json"}}).then(function(e){e?(e.attachmentsUrl=r,e.attachmentInfos?t.resolve(e):e.error&&t.reject(e.error)):t.reject(e)},function(e){t.reject(e)}),t}(d).then(function(e){if(f.removeChild(m),e&&e.attachmentInfos&&e.attachmentInfos.length>0){var t=function(e){var t=document.createElement("a"),n=[["url",encodeURIComponent(e)].join("="),["fields",encodeURIComponent(i.join(","))].join("=")].join("&");return t.href=[o,n].join("?"),t.textContent="View attached images in carousel",t.target="_blank",t}(d);t.classList.add("gallery-link"),f.appendChild(t);var n=function(e){var t=e.attachmentsUrl,n=e.attachmentInfos,r=document.createElement("ul"),a=/^image\//i;r.classList.add("attachment-link-list");for(var o=0,i=n.length;o<i;o+=1){var c=n[o],u=document.createElement("li"),l=document.createElement("a");l.href=[t,c.id].join("/"),l.target="_blank",l.textContent=c.name,l.dataset&&(l.dataset.size=""+c.size||"",l.dataset.contentType=c.contentType),a.test(c.contentType)&&u.classList.add("image-link-item"),u.appendChild(l),r.appendChild(u)}return r}(e);f.appendChild(n)}else f.textContent="No attachments detected"},function(e){f.removeChild(m),console.error("attributes error",e)}),s.appendChild(p);for(var h=0,v=i.length;h<v;h++){var g=i[h];if(r.hasOwnProperty(g)&&!c.test(g)&&g!==t){var y=r[g];s=u.insertRow(-1),(p=document.createElement("th")).textContent=g,s.appendChild(p),(p=document.createElement("td")).textContent=y,s.appendChild(p),u.appendChild(s)}}return u}return new r({content:function(e){return c(e)}})}.apply(t,r))||(e.exports=a)},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n}])});
//# sourceMappingURL=HabitatConnectivityInfoTemplate.js.map