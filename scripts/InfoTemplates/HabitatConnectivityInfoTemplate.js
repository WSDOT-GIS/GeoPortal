define(["dojo/Deferred","esri/InfoTemplate","esri/request"],((e,t,n)=>{return r={670:(e,t,n)=>{var r,a;r=[n,t,n(599),n(562),n(636)],void 0===(a=function(e,t,n,r,a){"use strict";var o="http://wsdot-gis.github.io/arcgis-server-attachment-gallery/",i=["Structure ID","Location Name","Fence ID","Feature Name","State Route ID","Milepost","Beginning Milepost","Ending Milepost","State Route Direction","Fence Height","Fence Material","Post Material","Structure Type","Structure Subtype","Structure Design Function","I-4 Program","Permeability Ranked","Bridge Structure ID","Bridge Number"];return new r({content:function(e){return function(e){var t=e.result.displayFieldName,r=e.attributes,c=/^((O(BJECT)?ID(_\d+)?)|(Shape(\.STLength\(\))))$/i,s=document.createElement("table"),d=document.createElement("caption");d.textContent=r[t],s.appendChild(d),s.classList.add("habitat-connectivity");var l=[e.layer.url,e.result.layerId,r.OBJECTID].join("/"),u=document.createElement("tr");s.appendChild(u);var p=document.createElement("th");p.colSpan=2;var m=p,h=document.createElement("progress");h.textContent="Loading attachment data...",m.appendChild(h),function(e){var t=new n,r=[e,"attachments"].join("/");return a({url:r,content:{f:"json"}}).then((function(e){e?(e.attachmentsUrl=r,e.attachmentInfos?t.resolve(e):e.error&&t.reject(e.error)):t.reject(e)}),(function(e){t.reject(e)})),t}(l).then((function(e){if(m.removeChild(h),e&&e.attachmentInfos&&e.attachmentInfos.length>0){var t=function(e){var t=document.createElement("a"),n=[["url",encodeURIComponent(e)].join("="),["fields",encodeURIComponent(i.join(","))].join("=")].join("&");return t.href=[o,n].join("?"),t.textContent="View attached images in carousel",t.target="_blank",t}(l);t.classList.add("gallery-link"),m.appendChild(t);var n=function(e){var t=e.attachmentsUrl,n=e.attachmentInfos,r=document.createElement("ul"),a=/^image\//i;r.classList.add("attachment-link-list");for(var o=0,i=n.length;o<i;o+=1){var c=n[o],s=document.createElement("li"),d=document.createElement("a");d.href=[t,c.id].join("/"),d.target="_blank",d.textContent=c.name,d.dataset&&(d.dataset.size="".concat(c.size)||"",d.dataset.contentType=c.contentType),a.test(c.contentType)&&s.classList.add("image-link-item"),s.appendChild(d),r.appendChild(s)}return r}(e);m.appendChild(n)}else m.textContent="No attachments detected"}),(function(e){m.removeChild(h),console.error("attributes error",e)})),u.appendChild(p);for(var f=0,v=i.length;f<v;f++){var g=i[f];if(r.hasOwnProperty(g)&&!c.test(g)&&g!==t){var C=r[g];u=s.insertRow(-1),(p=document.createElement("th")).textContent=g,u.appendChild(p),(p=document.createElement("td")).textContent=C,u.appendChild(p),s.appendChild(u)}}return s}(e)}})}.apply(t,r))||(e.exports=a)},599:t=>{"use strict";t.exports=e},562:e=>{"use strict";e.exports=t},636:e=>{"use strict";e.exports=n}},a={},function e(t){var n=a[t];if(void 0!==n)return n.exports;var o=a[t]={exports:{}};return r[t](o,o.exports,e),o.exports}(670);var r,a}));
//# sourceMappingURL=HabitatConnectivityInfoTemplate.js.map