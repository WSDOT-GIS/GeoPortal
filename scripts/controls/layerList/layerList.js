define(["esri/layers/layer","esri/layers/FeatureLayer","dojo/_base/connect","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ArcGISImageServiceLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/ImageParameters","esri/layers/KMLLayer","esri/layers/LabelLayer"],function(e,t,r,n,a,o,i,l,s){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=4)}([function(e,t,r){"use strict";r.r(t),r.d(t,"__extends",function(){return a}),r.d(t,"__assign",function(){return o}),r.d(t,"__rest",function(){return i}),r.d(t,"__decorate",function(){return l}),r.d(t,"__param",function(){return s}),r.d(t,"__metadata",function(){return u}),r.d(t,"__awaiter",function(){return d}),r.d(t,"__generator",function(){return c}),r.d(t,"__exportStar",function(){return p}),r.d(t,"__values",function(){return y}),r.d(t,"__read",function(){return f}),r.d(t,"__spread",function(){return h}),r.d(t,"__await",function(){return m}),r.d(t,"__asyncGenerator",function(){return v}),r.d(t,"__asyncDelegator",function(){return g}),r.d(t,"__asyncValues",function(){return _}),r.d(t,"__makeTemplateObject",function(){return b}),r.d(t,"__importStar",function(){return L}),r.d(t,"__importDefault",function(){return I});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function a(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function i(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r}function l(e,t,r,n){var a,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}function s(e,t){return function(r,n){t(r,n,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{s(n.next(e))}catch(e){o(e)}}function l(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(i,l)}s((n=n.apply(e,t||[])).next())})}function c(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function p(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}function y(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function f(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function v(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,a=r.apply(e,t||[]),o=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(e){a[e]&&(n[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||l(e,t)})})}function l(e,t){try{!function(e){e.value instanceof m?Promise.resolve(e.value.v).then(s,u):d(o[0][2],e)}(a[e](t))}catch(e){d(o[0][3],e)}}function s(e){l("next",e)}function u(e){l("throw",e)}function d(e,t){e(t),o.shift(),o.length&&l(o[0][0],o[0][1])}}function g(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,a){t[n]=e[n]?function(t){return(r=!r)?{value:m(e[n](t)),done:"return"===n}:a?a(t):t}:a}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=y(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,a){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,a,(t=e[r](t)).done,t.value)})}}}function b(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function L(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){var n;void 0===(n=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.ignoreSoe=Boolean(e.ignoreSoe),this.additionalMetadata=e.additionalMetadata||{}}return e.prototype.createListOfLinks=function(){var e=document.createElement("ul");for(var t in this.additionalMetadata)if(this.additionalMetadata.hasOwnProperty(t)){var r=document.createElement("li"),n=document.createElement("a");r.appendChild(n),n.textContent=t,n.href=this.additionalMetadata[t],n.target="_blank",e.appendChild(r)}return e},e}();t.default=r}.apply(t,[r,t]))||(e.exports=n)},function(e,t,r){var n,a;n=[r,t,r(0),r(5),r(1),r(6),r(7),r(14)],void 0===(a=function(e,t,r,n,a,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),a=r.__importDefault(a);var l="<span style='cursor:pointer'>&Rrightarrow;</span>",s="<img src='images/ajax-loader.gif' height='16' width='16' alt='Loading icon' />";function u(e){for(var t=Number(this.value),r=e.data.layer,n=this.checked?[t]:new Array,a=0,o=r.visibleLayers.length;a<o;a+=1){var i=r.visibleLayers[a],l=r.layerInfos[i];i!==t&&l&&null===l.subLayerIds&&n.push(i)}0===n.length&&n.push(-1),r.setVisibleLayers(n)}function d(e,t){e&&(void 0===t&&(t="none"===$("> ul",e).css("display")),t?$(e).addClass("collapsed").removeClass("expanded"):$(e).addClass("expanded").removeClass("collapsed"))}function c(e){var t=e.data.parent,r=$("> ul",t);return d(t,"none"!==r.css("display")),r.toggle("blind"),!1}function p(e){e.data.tools.show()}function y(e){e.data.tools.hide()}function f(e){var t=e.data.layer;$("<div>").layerOptions({layer:t}).dialog({title:[t.id,"Options"].join(" "),position:[e.clientX,e.clientY],modal:!0,close:function(){$(this).dialog("destroy").remove()}});return!1}function h(e){var t=$(this.element);this._hideLoading(),t.removeClass("ui-layer-list-not-loaded");try{"function"==typeof e.getIdsOfLayersWithMetadata?e.getIdsOfLayersWithMetadata(function(t){if(e.metadataLayers=t,t&&t.length)for(var r=0,n=t.length;r<n;r+=1){var a=t[r];e.layerInfos[a].metadataUrl=e.getMetadataUrl(a)}},function(){e.metadataLayers=null}):"function"==typeof e.supportsMetadata&&e.supportsMetadata(function(e){console.log("supports metadata",e)},function(e){console.error(e)})}catch(t){console.error("Error creating metadata list for layer",{error:t,layer:e})}var r=$(this.options.contextMenuIcon).appendTo(t).click({layer:e},f);if(t.mouseover({tools:r},p).mouseout({tools:r},y),!this.options.layer.omitSublayers&&"function"==typeof e.setVisibleLayers&&e.layerInfos.length>1){t.addClass("ui-layer-list-has-children");var n=$("> label",t).click({parent:t},c);$(function(e){if(void 0===e.layerInfos)return null;for(var t=$("<ul>").hide(),r=0,n=e.layerInfos.length;r<n;r+=1){var a=e.layerInfos[r],o=$("<li>").attr({"data-sublayerId":a.id}),i=null!==a.subLayerIds?null:$("<input>").attr({type:"checkbox",value:a.id,checked:a.defaultVisibility}).appendTo(o).addClass("ui-layer-list-sublayer");null===a.subLayerIds?$("<label>").text(a.name).appendTo(o):(o.addClass("ui-layer-list-has-children"),$("<label>").text(a.name).appendTo(o).click({parent:o},c),d(o));var l=void 0;if(-1===a.parentLayerId)t.append(o);else{var s=$(["li[data-subLayerId=",a.parentLayerId,"]"].join(""),t);0===(l=$("ul",s)).length&&(l=$("<ul>").appendTo(s)),l.append(o)}i&&i.change({layer:e,list:l},u)}return t}(e)).appendTo(t),d(t[0]),n.click()}try{this.setIsInScale()}catch(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}}function m(e){this._layer.loaded||(this.disable(),this._hideLoading(),$(this.element).removeClass("ui-layer-list-not-loaded").addClass("ui-state-error").attr("title","Error\n"+i.formatError(e))),this._trigger("layerError",{error:e})}function v(e){var t=e.data.widget;e.currentTarget.checked?t._layer?t._layer.show():(t._showLoading(),t._layer=i.createLayer(t.options.layer),t.options.map.addLayer(t._layer),n.default.connect(t._layer,"onError",t,m),n.default.connect(t._layer,"onLoad",t,h)):t._layer&&t._layer.hide()}function g(e,t,r,n){if(r)for(var a=$(".ui-layer-list-item",this.element),o=0,i=a.length;o<i;o+=1){a.eq(o).layerListItem("setIsInScale",n.scale)}}$.widget("ui.layerListItem",{options:{layer:null,map:null,label:null,contextMenuIcon:l,loadingIcon:s},_showLoading:function(){$(".ui-layer-list-item-loading-icon",this.element).show()},_hideLoading:function(){$(".ui-layer-list-item-loading-icon",this.element).hide()},_checkbox:null,_layer:null,getLayer:function(){return this._layer},_sublayerDiv:null,setIsInScale:function(e){if(!this._layer)return this;this._layer;null!==e&&void 0!==e||(e=this.options.map.__LOD.scale);var t=this._layer.scales;if(void 0!==t&&$.isArray(t)){var r=t[0],n=t[t.length-1];(0===r||r>=e)&&(0===n||n<=e)?$(this.element).removeClass("ui-layer-list-out-of-scale"):$(this.element).addClass("ui-layer-list-out-of-scale")}return this},_addInfoFromLoadedLayer:h,_create:function(){return this.element.addClass("ui-layer-list-item ui-layer-list-not-loaded"),this._checkbox=$("<input>").attr({type:"checkbox","data-layer-id":this.options.layer.id||this.options.layer.options.id}).appendTo(this.element).change({widget:this},v),$("<label>").text(this.options.label||this.options.layer.id||this.options.layer.options.id||"Unnamed").appendTo(this.element),$(this.options.loadingIcon).addClass("ui-layer-list-item-loading-icon").appendTo(this.element).hide(),void 0!==this.options.layer&&null!==this.options.layer&&"function"==typeof this.options.layer.isInstanceOf&&this.options.layer.isInstanceOf(a.default)&&(this._layer=this.options.layer,this._addInfoFromLoadedLayer(this._layer),this._checkbox[0].checked=this._layer.visible,$(this.element).mouseout()),this},disable:function(){this._checkbox.change(null).attr("disabled",!0)[0].checked=!1,$.Widget.prototype.disable.apply(this,arguments)},_destroy:function(){$.Widget.prototype.destroy.apply(this,arguments)}}),$.widget("ui.layerListGroup",{options:{map:null,groupName:null,layers:null,startCollapsed:!1,contextMenuIcon:l,loadingIcon:s},_list:null,toggle:function(){return"none"===$("ul",this.element).css("display")?(this._list.show("blind"),$(this.element).removeClass("collapsed"),this._trigger("collapse",this)):(this._list.hide("blind"),$(this.element).addClass("collapsed"),this._trigger("expand",this)),this},_addLayer:function(e){var t=$("<li>").appendTo(this._list).layerListItem({layer:e,map:this.options.map,contextMenuIcon:this.options.contextMenuIcon,loadingIcon:this.options.loadingIcon});return this._trigger("layerAdd",this,{layer:e,layerListItem:t.data("layerListItem")}),this},_addGroup:function(e,t){var r=$("<li>").appendTo(this._list).layerListGroup({groupName:e,startCollapsed:this.options.startCollapsed,layers:t,map:this.options.map,contextMenuIcon:this.options.contextMenuIcon,loadingIcon:this.options.loadingIcon});return this._trigger("groupAdd",this,{name:e,layers:t,group:r.data("layerListGroup")}),this},_create:function(){var e=this,t=this.options.layers;$(e.element).addClass("ui-layer-list-group");var r=$(["<a href='#'>",e.options.groupName,"</a>"].join("")).attr("href","#").appendTo(e.element);if(e._list=$("<ul>").appendTo(e.element),r.click(function(){return e.toggle(),!1}),"array"===$.type(t))for(var n=0,a=t.length;n<a;n+=1)e._addLayer(t[n]);else if("object"===$.type(t))for(var o in t)t.hasOwnProperty(o)&&e._addGroup(o,t[o]);return e.options.startCollapsed&&e.toggle(),this},_destroy:function(){$.Widget.prototype.destroy.apply(this,arguments)}}),$.widget("ui.layerList",{options:{map:null,layers:null,startCollapsed:!1,contextMenuIcon:l,loadingIcon:s,startLayers:null,basemapRe:/layer((?:\d+)|(?:_osm)|(?:_bing))/i,bingRe:/layer_bing/i,osmRe:/layer_osm/i,bingLabel:"Bing",osmLabel:"OpenStreetMap",defaultBasemapLabel:"Basemap Layer",basemapGroupName:"Basemap",addAdditionalLayers:!0},getWidget:function(){return this},_layerExistsInToc:function(e){for(var t=!1,r=$(".ui-layer-list-item"),n=0,a=r.length;n<a;n+=1){if($(r.eq(n)).layerListItem("getLayer")===e){t=!0;break}}return t},_selectStartLayers:function(){for(var e=this.options.startLayers,t=$("li.ui-layer-list-item",this.element),r=0,n=t.length;r<n;r+=1)for(var a=t[r],o=0,i=e.length;o<i;o+=1){var l=e[o];if($("label",a).text()===l){var s=$("> input",a);(s=s.length?s[0]:null)&&(s.click(),$(s).change());break}}},_childNodeType:null,_addGroup:function(e){var t=$(this._childNodeType).appendTo(this.element).layerListGroup({map:this.options.map,startCollapsed:this.options.startCollapsed,groupName:e,layers:this.options.layers[e],contextMenuIcon:this.options.contextMenuIcon,loadingIcon:this.options.loadingIcon});return this._trigger("groupAdd",this,{group:t}),t},_addLayer:function(e,t){var r,n=this.element,a=!1,i=function(e){return"string"===$.type(e)?e:e.id?e.id:e.options&&e.options.id?e.options.id:null}(e);if(this.options.basemapRe.test(i)){for(var l=$(".ui-layer-list-group",this.element),s=0,u=l.length;s<u;s+=1){var d=l.eq(s),c=d.data("layerListGroup");if(Boolean(c.options)&&"string"==typeof c.options.groupName&&c.options.groupName===this.options.basemapGroupName){n=d[0],a=!0;break}}a||(n=this._addGroup(this.options.basemapGroupName)).addClass("basemap-group"),n=$("ul",n),r=this.options.bingRe.test(i)?this.options.bingLabel:this.options.osmRe.test(i)?this.options.osmLabel:o.createLayerNameFromUrl(e)||this.options.defaultBasemapLabel}if(!t&&!this._layerExistsInToc(e)){var p=$(this._childNodeType).appendTo(n).layerListItem({layer:e,map:this.options.map,contextMenuIcon:this.options.contextMenuIcon,loadingIcon:this.options.loadingIcon,label:r});this._trigger("layerAdd",this,{layer:e,layerListItem:p.data("layerListItem")})}return this},_removeLayer:function(e){for(var t=$(".ui-layer-list-item").filter(":not(.ui-layer-list-not-loaded)"),r=0,n=t.length;r<n;r+=1){var a=t.eq(r);if(a.layerListItem("getLayer")===e){a.remove();break}}this._trigger("layerRemove",this,{layer:e})},_addLayersAlreadyInMap:function(){for(var e=this.options.map,t=e.layerIds.concat(e.graphicsLayerIds),r=0,n=t.length;r<n;r+=1)this._addLayer(e.getLayer(t[r]))},_create:function(){var e=this.options.map;$(this.element).addClass("ui-layer-list");var t=this.element.nodeName?this.element:this.element[0];if(this._childNodeType=/[uo]l/i.test(t.nodeName)?"<li>":"<div>",$.isArray(this.options.layers))for(var r=0,a=this.options.layers.length;r<a;r+=1)this._addLayer(this.options.layers[r]);else for(var o in this.options.layers)this.options.layers.hasOwnProperty(o)&&this._addGroup(o);return $.isArray(this.options.startLayers)&&this._selectStartLayers(),n.default.connect(e,"extent-change",this,g),!0===this.options.addAdditionalLayers&&(n.default.connect(e,"onLayerAddResult",this,this._addLayer),n.default.connect(e,"onLayerRemove",this,this._removeLayer),this._addLayersAlreadyInMap()),this},_destroy:function(){$.Widget.prototype.destroy.apply(this,arguments)}}),$.widget("ui.tabbedLayerList",{options:{map:null,layers:null,startCollapsed:!1,contextMenuIcon:l,loadingIcon:s,startLayers:null,basemapRe:/layer((?:\d+)|(?:_osm)|(?:_bing))/i,basemapGroupName:"Basemap",addAdditionalLayers:!0},_create:function(){var e=this;function t(t,n){var a=e.options.layers[t]||[],o=i.makeIdSafeString(t,"-","ui-tabbed-layer-list-tab-",!0);r.append(["<li><a href='#",o,"'>",t,"</a></li>"].join(""));$("<div>").attr("id",o).appendTo(e.element).layerList({map:e.options.map,layers:a,startCollapsed:e.options.startCollapsed,contextMenuIcon:e.options.contextMenuIcon,loadingIcon:e.options.loadingIcon,startLayers:e.options.startLayers,basemapRe:e.options.basemapRe,basemapGroupName:e.options.basemapGroupName,addAdditionalLayers:Boolean(n)})}var r=$("<ul>").appendTo(e.element);for(var n in e.options.layers)e.options.layers.hasOwnProperty(n)&&t(n);return e.options.addAdditionalLayers&&t("Additional",!0),$(this.element).tabs(),this},_destroy:function(){$.Widget.prototype.destroy.apply(this,arguments)}})}.apply(t,n))||(e.exports=a)},function(e,t){e.exports=r},function(e,t,r){var n,a;n=[r,t,r(0),r(2)],void 0===(a=function(e,t,r,n){"use strict";function a(e,t,n,a){var o,i,l,s,u,d,c=e.createElement("table");c.createCaption().textContent=n;var p=c.createTHead(),y=c.createTBody(),f=function(e){var t,n,a=new Set;try{for(var o=r.__values(e),i=o.next();!i.done;i=o.next()){var l=i.value,s=l.attributes;for(var u in s)s.hasOwnProperty(u)&&a.add(u)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return a}(t),h=p.insertRow(-1);try{for(var m=r.__values(f),v=m.next();!v.done;v=m.next()){var g=v.value;(w=e.createElement("th")).scope="col",w.textContent=g,w.dataset.fieldName=g,h.appendChild(w)}}catch(e){o={error:e}}finally{try{v&&!v.done&&(i=m.return)&&i.call(m)}finally{if(o)throw o.error}}try{for(var _=r.__values(t.map(function(e){return e.attributes})),b=_.next();!b.done;b=_.next()){var L=b.value;h=y.insertRow(-1);try{for(var I=r.__values(f),x=I.next();!x.done;x=I.next()){var w,$=L[x.value];(w=h.insertCell(-1)).textContent=$}}catch(e){u={error:e}}finally{try{x&&!x.done&&(d=I.return)&&d.call(I)}finally{if(u)throw u.error}}}}catch(e){l={error:e}}finally{try{b&&!b.done&&(s=_.return)&&s.call(_)}finally{if(l)throw l.error}}return c}Object.defineProperty(t,"__esModule",{value:!0}),t.createLayerNameFromUrl=function(e){var t=null;if(e&&e.url){var r=e.url.match(/\/(\w+)\/MapServer/i);r&&(t=r[1])}return t&&(t=(t=t.replace(/([a-z])([A-Z])([a-z])/g,"$1 $2$3")).replace("_"," ")),t},t.featureAttributesToTable=a,t.graphicsToTables=function(e,t){var n,o,i=function(e){var t,n,a=new Map;try{for(var o=r.__values(e),i=o.next();!i.done;i=o.next()){var l=i.value,s=l.getLayer()||l.layer;if(s){var u=void 0;a.has(s)?u=a.get(s):(u=new Array,a.set(s,u)),u.push(l)}else console.warn("graphic has no associated layer",l)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return a.size?a:null}(t);if(!i)return null;var l=e.createDocumentFragment();try{for(var s=r.__values(i.entries()),u=s.next();!u.done;u=s.next()){var d=r.__read(u.value,2),c=d[0],p=a(e,d[1],c.id);l.appendChild(p)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return l}}.apply(t,n))||(e.exports=a)},function(e,t,r){var n,a;n=[r,t,r(0),r(8),r(9),r(10),r(2),r(11),r(12),r(13),r(1),r(3)],void 0===(a=function(e,t,r,n,a,o,i,l,s,u,d,c){"use strict";function p(e){var t=e?new l:null;if(t)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function y(e){var t=null;if("string"==typeof e){if(null===(t=/(?:esri\.layers\.)?ArcGISTiledMapServiceLayer/i.test(e)?o:/(?:esri\.layers\.)?ArcGISDynamicMapServiceLayer/i.test(e)?n:/(?:esri\.layers\.)?ArcGISImageServiceLayer/i.test(e)?a:/(?:esri\.layers\.)?FeatureLayer/i.test(e)?i:/(?:esri\.layers\.)?LabelLayer/i.test(e)?u:/(?:esri\.layers\.)?KMLLayer/i.test(e)?s:null))throw new Error("Unsupported layer type.");return t}if("function"==typeof e)return e}Object.defineProperty(t,"__esModule",{value:!0}),c=r.__importDefault(c),t.formatError=function(e){var t=null;return void 0!==e.details?t=e.details.join("\n"):void 0!==e.message&&(t=e.message),t},t.jsonToImageParameters=p,t.makeIdSafeString=function(e,t,r,n){return e=e.replace(/\W/gi,t||"-"),(n||/^[^a-z]/i.test(e))&&(e=[r||"z-",e].join("")),e},t.getLayerConstructor=y,t.createLayer=function(e){if(void 0!==e&&void 0!==e.isInstanceOf&&e.isInstanceOf(d))return e;var t=new(y(e.type||e.layerType))(e.url,function(e){var t=e?{}:null;if(t)for(var r in e)e.hasOwnProperty(r)&&(t[r]="imageParameters"===r?p(e[r]):e[r]);return t}(e.options));return t.metadataOptions=e.metadataOptions?new c.default(e.metadataOptions):null,t}}.apply(t,n))||(e.exports=a)},function(e,t){e.exports=n},function(e,t){e.exports=a},function(e,t){e.exports=o},function(e,t){e.exports=i},function(e,t){e.exports=l},function(e,t){e.exports=s},function(e,t,r){var n,a;n=[r,t,r(0),r(3)],void 0===(a=function(e,t,r,n){"use strict";function a(e,t){var r=e.target.valueAsNumber||t.value;e.data.layer.setOpacity(r)}return n=r.__importDefault(n),$.widget("ui.layerOptions",{options:{layer:null},_addMetadataLink:function(){var e=this.options.layer;if(Array.isArray(e.metadataLayers)&&e.metadataLayers.length>0){var t=document.createElement("div");t.classList.add("metadata-list-container");var r=document.createElement("h3");if(r.textContent="Metadata",t.appendChild(r),!e.metadataOptions||!0!==e.metadataOptions.ignoreSoe){var a=document.createElement("ul");t.appendChild(a);for(var o=0,i=e.metadataLayers.length;o<i;o+=1){var l=e.metadataLayers[o],s=void 0;try{s=e.getMetadataUrl(l,"html")}catch(e){console.error("Error getting metadata URL",e),s=null}if(s){var u=void 0;e.layerInfos&&(u=e.layerInfos[l].name);var d=document.createElement("li");a.appendChild(d);var c=document.createElement("a");c.href=s,c.textContent=u||"Metadata for sublayer "+l,c.setAttribute("class","ui-layer-options-metadata-link"),c.target="_blank",d.appendChild(c)}}}if(e.metadataOptions&&e.metadataOptions instanceof n.default){a=e.metadataOptions.createListOfLinks();t.appendChild(a)}this.element[0].appendChild(t)}},_create:function(){if(null===this.options.layer)throw new Error("No layer specified");var e=this.options.layer;if("function"==typeof e.setOpacity){$("<label>").text("Transparency").appendTo(this.element);var t=$("<div>").addClass("ui-layer-list-opacity-slider-container").appendTo(this.element);$("<div>").appendTo(t).slider({value:e.opacity,min:0,max:1,step:.1}).appendTo(t).bind("slidechange",{layer:e},a)}this._addMetadataLink()},_destroy:function(){$.Widget.prototype.destroy.apply(this,arguments)}})}.apply(t,n))||(e.exports=a)}])});
//# sourceMappingURL=layerList.js.map