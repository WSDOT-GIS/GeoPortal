/*! For license information please see main.js.LICENSE.txt */
define(["esri/map","esri/toolbars/draw","dijit/registry","esri/geometry/jsonUtils","esri/geometry/Point","esri/graphic","esri/SpatialReference","dijit/layout/ContentPane","esri/geometry/Polyline","esri/Color","esri/dijit/PopupTemplate","esri/layers/FeatureLayer","esri/renderers/SimpleRenderer","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleMarkerSymbol"],((e,t,r,n,o,a,i,u,s,c,l,d,f,p,m)=>(()=>{var y={712:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ArcGISAuthError:()=>n.ah,ArcGISRequestError:()=>a.y,ErrorTypes:()=>l.Z,NODEJS_DEFAULT_REFERER_HEADER:()=>n.cv,appendCustomParams:()=>o.t,checkForErrors:()=>n.Pl,cleanUrl:()=>i.b,decodeParam:()=>c.Z,decodeQueryString:()=>c.N,encodeFormData:()=>u.h,encodeParam:()=>s.i,encodeQueryString:()=>s.t,processParams:()=>g.T,request:()=>n.WY,requiresFormData:()=>g.N,setDefaultRequestOptions:()=>n.Tb,warn:()=>L.Z});var n=r(743),o=r(37),a=r(705),i=r(734),u=r(91),s=r(836),c=r(508),l=r(86),d=r(25),f={};for(const e in d)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(f[e]=()=>d[e]);r.d(t,f);var p=r(990);f={};for(const e in p)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(f[e]=()=>p[e]);r.d(t,f);var m=r(546);f={};for(const e in m)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(f[e]=()=>m[e]);r.d(t,f);var y=r(372);f={};for(const e in y)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(f[e]=()=>y[e]);r.d(t,f);var h=r(346);f={};for(const e in h)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(f[e]=()=>h[e]);r.d(t,f);var v=r(795);f={};for(const e in v)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(f[e]=()=>v[e]);r.d(t,f);var R=r(462);f={};for(const e in R)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(f[e]=()=>R[e]);r.d(t,f);var b=r(274);f={};for(const e in b)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(f[e]=()=>b[e]);r.d(t,f);var S=r(431);f={};for(const e in S)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(f[e]=()=>S[e]);r.d(t,f);var E=r(961);f={};for(const e in E)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(f[e]=()=>E[e]);r.d(t,f);var g=r(60),w=r(739);f={};for(const e in w)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes","processParams","requiresFormData"].indexOf(e)<0&&(f[e]=()=>w[e]);r.d(t,f);var U=r(125);f={};for(const e in U)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes","processParams","requiresFormData"].indexOf(e)<0&&(f[e]=()=>U[e]);r.d(t,f);var L=r(297)},743:(e,t,r)=>{"use strict";r.d(t,{Pl:()=>p,Tb:()=>d,WY:()=>m,ah:()=>f,cv:()=>c});var n=r(765),o=r(91),a=r(836),i=r(60),u=r(705),s=r(297),c="@esri/arcgis-rest-js",l={httpMethod:"POST",params:{f:"json"}};function d(e,t){e.authentication&&!t&&(0,s.Z)("You should not set `authentication` as a default in a shared environment such as a web server which will process multiple users requests. You can call `setDefaultRequestOptions` with `true` as a second argument to disable this warning."),l=e}var f=function(e){function t(t,r,n,o,a){void 0===t&&(t="AUTHENTICATION_ERROR"),void 0===r&&(r="AUTHENTICATION_ERROR_CODE");var i=e.call(this,t,r,n,o,a)||this;return i.name="ArcGISAuthError",i.message="AUTHENTICATION_ERROR_CODE"===r?t:r+": "+t,i}return(0,n.ZT)(t,e),t.prototype.retry=function(e,t){var r=this;void 0===t&&(t=3);var o=0,a=function(i,u){e(r.url,r.options).then((function(e){var t=(0,n.pi)((0,n.pi)({},r.options),{authentication:e});return o+=1,m(r.url,t)})).then((function(e){i(e)})).catch((function(e){"ArcGISAuthError"===e.name&&o<t?a(i,u):"ArcGISAuthError"===e.name&&o>=t?u(r):u(e)}))};return new Promise((function(e,t){a(e,t)}))},t}(u.y);function p(e,t,r,n,o){if(e.code>=400){var a=e.message,i=e.code;throw new u.y(a,i,e,t,n)}if(e.error){var s=e.error,c=(a=s.message,i=s.code,s.messageCode),l=c||i||"UNKNOWN_ERROR_CODE";if(498===i||499===i||"GWM_0003"===c||400===i&&"Unable to generate token."===a)throw o||new f(a,l,e,t,n);throw new u.y(a,l,e,t,n)}if("failed"===e.status||"failure"===e.status){a=void 0,i="UNKNOWN_ERROR_CODE";try{a=JSON.parse(e.statusMessage).message,i=JSON.parse(e.statusMessage).code}catch(t){a=e.statusMessage||e.message}throw new u.y(a,i,e,t,n)}return e}function m(e,t){void 0===t&&(t={params:{f:"json"}});var r=(0,n.pi)((0,n.pi)((0,n.pi)({httpMethod:"POST"},l),t),{params:(0,n.pi)((0,n.pi)({},l.params),t.params),headers:(0,n.pi)((0,n.pi)({},l.headers),t.headers)}),s=[],d=[];if(r.fetch||"undefined"==typeof fetch?(s.push("`fetch`"),d.push("`node-fetch`")):r.fetch=fetch.bind(Function("return this")()),"undefined"==typeof Promise&&(s.push("`Promise`"),d.push("`es6-promise`")),"undefined"==typeof FormData&&(s.push("`FormData`"),d.push("`isomorphic-form-data`")),!r.fetch||"undefined"==typeof Promise||"undefined"==typeof FormData)throw new Error("`arcgis-rest-request` requires a `fetch` implementation and global variables for `Promise` and `FormData` to be present in the global scope. You are missing "+s.join(", ")+". We recommend installing the "+d.join(", ")+" modules at the root of your application to add these to the global scope. See https://bit.ly/2KNwWaJ for more info.");var f=r.httpMethod,m=r.authentication,y=r.rawResponse,h=(0,n.pi)({f:"json"},r.params),v=null,R={method:f,credentials:r.credentials||"same-origin"};return r.headers&&r.headers["X-Esri-Auth-Client-Id"]&&e.indexOf("/oauth2/platformSelf")>-1&&(R.credentials="include"),(m?m.getToken(e,{fetch:r.fetch}).catch((function(t){return t.url=e,t.options=r,v=t,Promise.resolve("")})):Promise.resolve("")).then((function(t){t.length&&(h.token=t),m&&m.getDomainCredentials&&(R.credentials=m.getDomainCredentials(e));var u={};if("GET"===R.method){h.token&&r.hideToken&&"undefined"==typeof window&&(u["X-Esri-Authorization"]="Bearer "+h.token,delete h.token);var s=""===(0,a.t)(h)?e:e+"?"+(0,a.t)(h);r.maxUrlLength&&s.length>r.maxUrlLength||h.token&&r.hideToken?(R.method="POST",t.length&&r.hideToken&&(h.token=t,delete u["X-Esri-Authorization"])):e=s}var l=new RegExp("/items/.+/updateResources").test(e);return"POST"===R.method&&(R.body=(0,o.h)(h,l)),R.headers=(0,n.pi)((0,n.pi)({},u),r.headers),"undefined"!=typeof window||R.headers.referer||(R.headers.referer=c),(0,i.N)(h)||l||(R.headers["Content-Type"]="application/x-www-form-urlencoded"),r.fetch(e,R)})).then((function(t){if(!t.ok){var n=t.status,o=t.statusText;throw new u.y(o,"HTTP "+n,t,e,r)}if(y)return t;switch(h.f){case"json":case"geojson":return t.json();case"html":case"text":return t.text();default:return t.blob()}})).then((function(t){if("json"!==h.f&&"geojson"!==h.f||y)return t;var n=p(t,e,0,r,v);if(v){var o=e.toLowerCase().split(/\/rest(\/admin)?\/services\//)[0];r.authentication.federatedServers[o]={token:[],expires:new Date(Date.now()+864e5)},v=null}return n}))}},705:(e,t,r)=>{"use strict";r.d(t,{y:()=>n});var n=function(e,t,r,n,o){e=e||"UNKNOWN_ERROR",t=t||"UNKNOWN_ERROR_CODE",this.name="ArcGISRequestError",this.message="UNKNOWN_ERROR_CODE"===t?e:t+": "+e,this.originalMessage=e,this.code=t,this.response=r,this.url=n,this.options=o};n.prototype=Object.create(Error.prototype),n.prototype.constructor=n},86:(e,t,r)=>{"use strict";var n;r.d(t,{Z:()=>n}),function(e){e.ArcGISRequestError="ArcGISRequestError",e.ArcGISAuthError="ArcGISAuthError"}(n||(n={}))},25:()=>{},990:()=>{},546:()=>{},372:()=>{},346:()=>{},462:()=>{},795:()=>{},274:()=>{},431:()=>{},961:()=>{},739:()=>{},37:(e,t,r)=>{"use strict";r.d(t,{t:()=>o});var n=r(765);function o(e,t,r){var o=(0,n.pi)((0,n.pi)({params:{}},r),e);return o.params=t.reduce((function(t,r){return(e[r]||"boolean"==typeof e[r])&&(t[r]=e[r]),t}),o.params),["params","httpMethod","rawResponse","authentication","portal","fetch","maxUrlLength","headers"].reduce((function(e,t){return o[t]&&(e[t]=o[t]),e}),{})}},734:(e,t,r)=>{"use strict";function n(e){return"string"!=typeof e||"/"===(e=e.trim())[e.length-1]&&(e=e.slice(0,-1)),e}r.d(t,{b:()=>n})},508:(e,t,r)=>{"use strict";function n(e){var t=e.split("="),r=t[0],n=t[1];return{key:decodeURIComponent(r),value:decodeURIComponent(n)}}function o(e){return e.replace(/^#/,"").split("&").reduce((function(e,t){var r=n(t),o=r.key,a=r.value;return e[o]=a,e}),{})}r.d(t,{N:()=>o,Z:()=>n})},91:(e,t,r)=>{"use strict";r.d(t,{h:()=>a});var n=r(60),o=r(836);function a(e,t){var r=(0,n.N)(e)||t,a=(0,n.T)(e);if(r){var i=new FormData;return Object.keys(a).forEach((function(e){if("undefined"!=typeof Blob&&a[e]instanceof Blob){var t=a.fileName||a[e].name||e;i.append(e,a[e],t)}else i.append(e,a[e])})),i}return(0,o.t)(e)}},836:(e,t,r)=>{"use strict";r.d(t,{i:()=>o,t:()=>a});var n=r(60);function o(e,t){return Array.isArray(t)&&t[0]&&Array.isArray(t[0])?t.map((function(t){return o(e,t)})).join("&"):encodeURIComponent(e)+"="+encodeURIComponent(t)}function a(e){var t=(0,n.T)(e);return Object.keys(t).map((function(e){return o(e,t[e])})).join("&")}},60:(e,t,r)=>{"use strict";function n(e){return Object.keys(e).some((function(t){var r=e[t];if(!r)return!1;switch(r&&r.toParam&&(r=r.toParam()),r.constructor.name){case"Array":case"Object":case"Date":case"Function":case"Boolean":case"String":case"Number":return!1;default:return!0}}))}function o(e){var t={};return Object.keys(e).forEach((function(r){var n,o,a=e[r];if(a&&a.toParam&&(a=a.toParam()),a||0===a||"boolean"==typeof a||"string"==typeof a){var i;switch(a.constructor.name){case"Array":var u=null===(o=null===(n=a[0])||void 0===n?void 0:n.constructor)||void 0===o?void 0:o.name;i="Array"===u?a:"Object"===u?JSON.stringify(a):a.join(",");break;case"Object":i=JSON.stringify(a);break;case"Date":i=a.valueOf();break;case"Function":i=null;break;case"Boolean":i=a+"";break;default:i=a}(i||0===i||"string"==typeof i||Array.isArray(i))&&(t[r]=i)}})),t}r.d(t,{N:()=>n,T:()=>o})},125:()=>{},297:(e,t,r)=>{"use strict";function n(e){console&&console.warn&&console.warn.apply(console,[e])}r.d(t,{Z:()=>n})},765:(e,t,r)=>{"use strict";r.d(t,{ZT:()=>o,pi:()=>a});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)};function o(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var a=function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)}},628:(e,t,r)=>{var n;window,e.exports=(n=r(712),function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){e.exports=n},function(e,t,r){"use strict";function n(e){return e.getTime()}r.r(t);var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};function a(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new r((function(t){t(e.value)})).then(i,u)}s((n=n.apply(e,t||[])).next())}))}function i(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=n[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}Object.assign;var u=/^https?:\/\/.+\/MapServer\/exts\/LRSServer\b/,s=new RegExp(u.source+"/layers\\b"),c=new RegExp(u.source+"/applyEdits\\b"),l=new RegExp(u.source+"/createVersion\\b"),d=new RegExp(u.source+"/deleteVersion\\b"),f=new RegExp(u.source+"/reconcileVersion\\b"),p=new RegExp(u.source+"/networkLayers\\b"),m=new RegExp(p.source+"/\\d+\\b"),y=new RegExp(m.source+"/geometryToMeasure\\b"),h=new RegExp(m.source+"/measureToGeometry\\b"),v=new RegExp(m.source+"/translate\\b"),R=new RegExp(m.source+"/concurrencies\\b"),b=new RegExp(m.source+"/queryAttributeSet\\b"),S=new RegExp(m.source+"/checkEvents\\b"),E=new RegExp(u.source+"/eventLayers\\b"),g=new RegExp(E.source+"/\\d+\\b"),w=new RegExp(g.source+"/geometryToStation\\b"),U=new RegExp(g.source+"/stationToGeometry\\b"),L=new RegExp(u.source+"/redlineLayers\\b"),D=new RegExp(L.source+"/\\d+\\b"),I=new RegExp(u.source+"/centerlineLayers\\b"),_=new RegExp(I.source+"/\\d+\\b"),P=new RegExp(u.source+"/calibrationPointLayers\\b"),J=new RegExp(P.source+"/\\d+\\b"),C=new RegExp(u.source+"/intersectionLayers\\b"),O=new RegExp(C.source+"/\\d+\\b"),x=new RegExp(u.source+"/nonLRSLayers\\b"),T=new RegExp(x.source+"/\\d+\\b"),G=new RegExp(u.source+"/locks\\b"),F=new RegExp(G.source+"/query\\b"),A=new RegExp(G.source+"/acquire\\b"),M=new RegExp(G.source+"/release\\b"),N=r(0),k=function(e){function t(t,r){var n=this,o=t+" does not match "+r+".";return(n=e.call(this,o)||this).url=t,n.re=r,n}return function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t}(Error);function j(e,t){var r=e.match(t);if(r)return r[0];throw new k(e,t)}function B(e,t){return a(this,void 0,void 0,(function(){var r;return i(this,(function(n){return r=j(r=e.endpoint,t),delete e.endpoint,[2,Object(N.request)(r,e)]}))}))}function q(e){return a(this,void 0,void 0,(function(){return i(this,(function(t){return[2,B(e,u)]}))}))}function W(e){return a(this,void 0,void 0,(function(){return i(this,(function(t){return[2,B(e,s)]}))}))}function Q(e){return a(this,void 0,void 0,(function(){return i(this,(function(t){return[2,B(e,p)]}))}))}function V(e){if(Array.isArray(e)){if(e.length<2)throw TypeError("Item must be an array with two or more elements.");return{geometry:{x:e[0],y:e[1]}}}return e}var H=function(){function e(e){this._url=j(e,u)}return Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),e.prototype.geometryToMeasure=function(e,t,r,n,o,u,s){return a(this,void 0,void 0,(function(){var a,c;return i(this,(function(i){switch(i.label){case 0:return a=this.url+"/networkLayers/"+e+"/geometryToMeasure",c={locations:t.map(V)},void 0!==r&&(c.tolerance=r),n&&(c.temporalViewDate=n.getTime()),o&&(c.inSR=o),u&&(c.outSR=u),s&&(c.gdbVersion=s),[4,Object(N.request)(a,{params:c})];case 1:return[2,i.sent()]}}))}))},e.prototype.measureToGeometry=function(e,t,r,n,o){return a(this,void 0,void 0,(function(){var a,u;return i(this,(function(i){switch(i.label){case 0:return a=this.url+"/networkLayers/"+e+"/measureToGeometry",u={layerId:e,locations:t},r&&(u.temporalViewDate=r.getTime()),n&&(u.outSR=n),o&&(u.gdbVersion=o),[4,Object(N.request)(a,{params:u})];case 1:return[2,i.sent()]}}))}))},e}();r.d(t,"dateToTimeInstant",(function(){return n})),r.d(t,"validateUrl",(function(){return j})),r.d(t,"getLrsServiceInfo",(function(){return q})),r.d(t,"getAllLayers",(function(){return W})),r.d(t,"getNetworkLayers",(function(){return Q})),r.d(t,"LrsClient",(function(){return H})),r.d(t,"lrsServer",(function(){return u})),r.d(t,"allLayers",(function(){return s})),r.d(t,"applyEdits",(function(){return c})),r.d(t,"createVersion",(function(){return l})),r.d(t,"deleteVersion",(function(){return d})),r.d(t,"reconcileVersion",(function(){return f})),r.d(t,"networkLayers",(function(){return p})),r.d(t,"networkLayer",(function(){return m})),r.d(t,"geometryToMeasure",(function(){return y})),r.d(t,"measureToGeometry",(function(){return h})),r.d(t,"translate",(function(){return v})),r.d(t,"concurrencies",(function(){return R})),r.d(t,"queryAttributeSet",(function(){return b})),r.d(t,"checkEvents",(function(){return S})),r.d(t,"eventLayers",(function(){return E})),r.d(t,"eventLayer",(function(){return g})),r.d(t,"geometryToStation",(function(){return w})),r.d(t,"stationToGeometry",(function(){return U})),r.d(t,"redlineLayers",(function(){return L})),r.d(t,"redlineLayer",(function(){return D})),r.d(t,"centerlineLayers",(function(){return I})),r.d(t,"centerlineLayer",(function(){return _})),r.d(t,"calibrationPointLayers",(function(){return P})),r.d(t,"calibrationPointLayer",(function(){return J})),r.d(t,"intersectionLayers",(function(){return C})),r.d(t,"intersectionLayer",(function(){return O})),r.d(t,"nonLRSLayers",(function(){return x})),r.d(t,"nonLRSLayer",(function(){return T})),r.d(t,"locks",(function(){return G})),r.d(t,"locksQuery",(function(){return F})),r.d(t,"locksAcquire",(function(){return A})),r.d(t,"locksRelease",(function(){return M}))}]))},776:(e,t,r)=>{var n,o;n=[r,t,r(655)],o=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCountyOptions=void 0;var n=function(e){var t,n,o=new Map;if(!e||!e.features)throw new TypeError("FeatureSet features not defined.");try{for(var a=r.__values(e.features),i=a.next();!i.done;i=a.next()){var u=i.value.attributes,s=u.JURLBL,c=u.JURFIPSDSG;if(!c||!s)throw new TypeError("FIPS: ".concat(c,", Label: ").concat(s));o.set(c-53e3,s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o}({displayFieldName:"JURLBL",fieldAliases:{JURLBL:"JURISDICTION LABEL",JURNM:"JURISDICTION NAME",JURDSG:"COUNTY NUMBER",JURFIPSDSG:"COUNTY FIPS CODE"},fields:[{name:"JURLBL",type:"esriFieldTypeString",alias:"JURISDICTION LABEL",length:20},{name:"JURNM",type:"esriFieldTypeString",alias:"JURISDICTION NAME",length:50},{name:"JURDSG",type:"esriFieldTypeDouble",alias:"COUNTY NUMBER"},{name:"JURFIPSDSG",type:"esriFieldTypeDouble",alias:"COUNTY FIPS CODE"}],features:[{attributes:{JURLBL:"Adams",JURNM:"Adams County",JURDSG:1,JURFIPSDSG:53001}},{attributes:{JURLBL:"Asotin",JURNM:"Asotin County",JURDSG:2,JURFIPSDSG:53003}},{attributes:{JURLBL:"Benton",JURNM:"Benton County",JURDSG:3,JURFIPSDSG:53005}},{attributes:{JURLBL:"Chelan",JURNM:"Chelan County",JURDSG:4,JURFIPSDSG:53007}},{attributes:{JURLBL:"Clallam",JURNM:"Clallam County",JURDSG:5,JURFIPSDSG:53009}},{attributes:{JURLBL:"Clark",JURNM:"Clark County",JURDSG:6,JURFIPSDSG:53011}},{attributes:{JURLBL:"Columbia",JURNM:"Columbia County",JURDSG:7,JURFIPSDSG:53013}},{attributes:{JURLBL:"Cowlitz",JURNM:"Cowlitz County",JURDSG:8,JURFIPSDSG:53015}},{attributes:{JURLBL:"Douglas",JURNM:"Douglas County",JURDSG:9,JURFIPSDSG:53017}},{attributes:{JURLBL:"Ferry",JURNM:"Ferry County",JURDSG:10,JURFIPSDSG:53019}},{attributes:{JURLBL:"Franklin",JURNM:"Franklin County",JURDSG:11,JURFIPSDSG:53021}},{attributes:{JURLBL:"Garfield",JURNM:"Garfield County",JURDSG:12,JURFIPSDSG:53023}},{attributes:{JURLBL:"Grant",JURNM:"Grant County",JURDSG:13,JURFIPSDSG:53025}},{attributes:{JURLBL:"Grays Harbor",JURNM:"Grays Harbor County",JURDSG:14,JURFIPSDSG:53027}},{attributes:{JURLBL:"Island",JURNM:"Island County",JURDSG:15,JURFIPSDSG:53029}},{attributes:{JURLBL:"Jefferson",JURNM:"Jefferson County",JURDSG:16,JURFIPSDSG:53031}},{attributes:{JURLBL:"King",JURNM:"King County",JURDSG:17,JURFIPSDSG:53033}},{attributes:{JURLBL:"Kitsap",JURNM:"Kitsap County",JURDSG:18,JURFIPSDSG:53035}},{attributes:{JURLBL:"Kittitas",JURNM:"Kittitas County",JURDSG:19,JURFIPSDSG:53037}},{attributes:{JURLBL:"Klickitat",JURNM:"Klickitat County",JURDSG:20,JURFIPSDSG:53039}},{attributes:{JURLBL:"Lewis",JURNM:"Lewis County",JURDSG:21,JURFIPSDSG:53041}},{attributes:{JURLBL:"Lincoln",JURNM:"Lincoln County",JURDSG:22,JURFIPSDSG:53043}},{attributes:{JURLBL:"Mason",JURNM:"Mason County",JURDSG:23,JURFIPSDSG:53045}},{attributes:{JURLBL:"Okanogan",JURNM:"Okanogan County",JURDSG:24,JURFIPSDSG:53047}},{attributes:{JURLBL:"Pacific",JURNM:"Pacific County",JURDSG:25,JURFIPSDSG:53049}},{attributes:{JURLBL:"Pend Oreille",JURNM:"Pend Oreille County",JURDSG:26,JURFIPSDSG:53051}},{attributes:{JURLBL:"Pierce",JURNM:"Pierce County",JURDSG:27,JURFIPSDSG:53053}},{attributes:{JURLBL:"San Juan",JURNM:"San Juan County",JURDSG:28,JURFIPSDSG:53055}},{attributes:{JURLBL:"Skagit",JURNM:"Skagit County",JURDSG:29,JURFIPSDSG:53057}},{attributes:{JURLBL:"Skamania",JURNM:"Skamania County",JURDSG:30,JURFIPSDSG:53059}},{attributes:{JURLBL:"Snohomish",JURNM:"Snohomish County",JURDSG:31,JURFIPSDSG:53061}},{attributes:{JURLBL:"Spokane",JURNM:"Spokane County",JURDSG:32,JURFIPSDSG:53063}},{attributes:{JURLBL:"Stevens",JURNM:"Stevens County",JURDSG:33,JURFIPSDSG:53065}},{attributes:{JURLBL:"Thurston",JURNM:"Thurston County",JURDSG:34,JURFIPSDSG:53067}},{attributes:{JURLBL:"Wahkiakum",JURNM:"Wahkiakum County",JURDSG:35,JURFIPSDSG:53069}},{attributes:{JURLBL:"Walla Walla",JURNM:"Walla Walla County",JURDSG:36,JURFIPSDSG:53071}},{attributes:{JURLBL:"Whatcom",JURNM:"Whatcom County",JURDSG:37,JURFIPSDSG:53073}},{attributes:{JURLBL:"Whitman",JURNM:"Whitman County",JURDSG:38,JURFIPSDSG:53075}},{attributes:{JURLBL:"Yakima",JURNM:"Yakima County",JURDSG:39,JURFIPSDSG:53077}}]});t.createCountyOptions=function(){var e,t,o=document.createDocumentFragment();o.appendChild(document.createElement("option"));try{for(var a=r.__values(n),i=a.next();!i.done;i=a.next()){var u=r.__read(i.value,2),s=u[0],c=u[1],l=document.createElement("option");l.value=s.toString(10),l.label=c,l.textContent=c,o.appendChild(l)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return o},t.default=n}.apply(t,n),void 0===o||(e.exports=o)},301:(e,t,r)=>{var n,o;n=[r,t,r(655),r(628),r(231),r(362),r(857),r(205)],o=function(e,t,r,n,o,a,i,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryToMeasureControl=void 0;var s=function(){function e(e,t,s){void 0===t&&(t=u.defaultLrsSvcUrl),void 0===s&&(s=u.defaultLayerId);var c=this;if(this.map=e,this.url=t,this.layerId=s,!(e&&e instanceof o))throw TypeError("Invalid map: ".concat(e));this.form=function(e,t){void 0===e&&(e=u.defaultLrsSvcUrl),void 0===t&&(t=u.defaultLayerId);var r=document.createElement("form");r.id=(0,u.generateId)("geometryToMeasureForm"),r.action="".concat(e,"/networkLayers/").concat(t,"/geometryToMeasure");var n=(0,i.createSearchLink)(/County/i),o=document.createElement("p");o.appendChild(n),r.appendChild(o);var a=document.createElement("input");a.type="number",a.min="0",a.name="tolerance",a.id=(0,u.generateId)("toleranceInput"),a.title="The maximum distance in map units (feet) to snap a point to the closest location on a nearby route. If a point is farther than the tolerance from a route, then an indication is returned that the point is not locatable.",(0,u.addToFormWithLabel)(r,a).textContent="Tolerance (in feet)";var s=document.createElement("input");s.type="date",s.name="temporalViewDate",s.id=(0,u.generateId)("temporalViewDateInput"),(0,u.addToFormWithLabel)(r,s);var c=document.createElement("button");return c.type="submit",c.textContent="Locate",r.appendChild(c),r}(t,s),this.draw=new a(this.map),this.lrsClient=new n.LrsClient(t);var l=this;this.form.addEventListener("submit",(function(e){try{l.draw.activate(a.POINT),l.map.setInfoWindowOnClick(!1),l.map.disablePopups()}catch(e){alert("Error: Could not activate the draw toolbar."),console.error("Error activating the draw toolbar",e)}e.preventDefault()})),this.draw.on("draw-complete",(function(e){return r.__awaiter(c,void 0,void 0,(function(){var t,n,o,a,i,u;return r.__generator(this,(function(r){switch(r.label){case 0:if(l.draw.deactivate(),l.map.setInfoWindowOnClick(!0),l.map.enablePopups(),!e.geometry||!e.geometry.type.match(/point/gi))return[2];t=e.geometry,n=e.geometry.spatialReference.wkid,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.lrsClient.geometryToMeasure(l.layerId,[[t.x,t.y]],l.tolerance,l.temporalViewDate,n,n)];case 2:return o=r.sent(),a=new CustomEvent("geometryToMeasure",{detail:o}),l.form.dispatchEvent(a),[3,4];case 3:return i=r.sent(),u=new CustomEvent("geometryToMeasureError",{detail:i}),l.form.dispatchEvent(u),[3,4];case 4:return[2]}}))}))}))}return Object.defineProperty(e.prototype,"toleranceInput",{get:function(){var e="tolerance",t=this.form.elements.namedItem(e);if(!(t&&t instanceof HTMLInputElement))throw new Error("No input element named ".concat(e," was found in this form."));return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tolerance",{get:function(){var e=this.toleranceInput;return Number(e.value)},set:function(e){this.toleranceInput.value=null!=e?e.toString(10):""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"temporalViewDate",{get:function(){var e=this.form.elements.namedItem("temporalViewDate");if(e&&e.value)return e.valueAsDate||void 0},enumerable:!1,configurable:!0}),e}();t.GeometryToMeasureControl=s}.apply(t,n),void 0===o||(e.exports=o)},389:(e,t,r)=>{var n,o;n=[r,t,r(655),r(48),r(962),r(130),r(301),r(868),r(626),r(205)],o=function(e,t,r,n,o,a,i,u,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupCrab=void 0,t.setupCrab=function(e,t,l){var d=this;void 0===t&&(t=c.defaultLrsMapServiceUrl),void 0===l&&(l=c.defaultLayerId);var f=document.getElementById("toolsAccordion");if(!f)throw Error("#toolsAccordion element not found.");var p=document.createElement("div");p.id="crabPane",f.appendChild(p);var m=new n({title:"CRMP",id:"crabPane"},p);e.addChild(m);var y=document.createElement("div");y.id="crabUI",window.addEventListener("mapload",(function(e){var n=e.detail;n.addLayers([u.crabPointsLayer,u.crabLinesLayer]);var f="crab-tool-label",p=document.createElement("div");p.textContent="Locate a point on a County Road",p.classList.add(f),y.appendChild(p);var m=document.createElement("p"),h=new i.GeometryToMeasureControl(n);h.tolerance=50,m.innerHTML="Select <b>".concat(h.form.querySelector("button[type=submit]").textContent," </b> then click on a country road"),y.appendChild(m),y.appendChild(h.form),h.form.addEventListener("geometryToMeasure",(function(e){var t,o,a=e.detail,i=Array.from((0,c.IterateG2MOutputToFeatures)(a));u.crabPointsLayer.suspend();try{try{for(var s=r.__values(i),l=s.next();!l.done;l=s.next()){var d=l.value;u.crabPointsLayer.add(d)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(t)throw t.error}}}finally{u.crabPointsLayer.resume()}if(i.length){var f=n.infoWindow;f.setFeatures(i);var p=i[0].geometry;f.show(p)}else{var m=a.locations.map((function(e){return e.status})),y="No locations found: ".concat(m.join(", "));alert(y)}})),h.form.addEventListener("geometryToMeasureError",(function(e){var t=e.detail;console.error("geometry to measure error",t),alert("Geometry to measure error. See console for details.")}));var v=document.createElement("div");v.classList.add(f),v.textContent="Locate a County Road and Milepost",y.appendChild(v);var R=new s.MeasureToGeometryControl(t,l);y.appendChild(R.form);var b=document.createElement("div");b.id="crabClearControls",b.classList.add("danger");var S=document.createElement("button");S.classList.add("clear-crab-button"),b.appendChild(S),S.textContent="🗑️❌ Remove graphics created by CRMP tools from the map ❌🗑️",S.onclick=function(){u.crabLinesLayer.graphics.length||u.crabPointsLayer.graphics.length?confirm("Are you sure you want to delete all graphics you created with the CRMP tool?")&&(u.crabLinesLayer.clear(),u.crabPointsLayer.clear()):alert("There are currently no graphics to remove.")},y.appendChild(b),R.form.addEventListener("m2gsubmit",(function(e){return r.__awaiter(d,void 0,void 0,(function(){var t,i,s,l,d,f,p,m,y,h,v,R,b,S,E;return r.__generator(this,(function(g){switch(g.label){case 0:t=e.detail,i=n.infoWindow,g.label=1;case 1:return g.trys.push([1,3,,4]),[4,t];case 2:return s=g.sent(),[3,4];case 3:return l=g.sent(),console.error("measureToGeometry",l),[2];case 4:d=new Array,f=new Array,p=new Array,m=null;try{for(y=r.__values((0,c.m2gOutputToFeatures)(s)),h=y.next();!h.done;h=y.next())(m=h.value).geometry?/Point$/i.test(m.geometry.type)?f.push(m):p.push(m):d.push(m)}catch(e){S={error:e}}finally{try{h&&!h.done&&(E=y.return)&&E.call(y)}finally{if(S)throw S.error}}return[u.crabPointsLayer,u.crabLinesLayer].forEach((function(e){return e.suspend()})),f.length&&f.forEach((function(e){return u.crabPointsLayer.add(e)})),p.length&&p.forEach((function(e){return u.crabLinesLayer.add(e)})),[u.crabPointsLayer,u.crabLinesLayer].forEach((function(e){return e.resume()})),(v=f.length?f[0]:p.length?p[0]:null)?(v.geometry instanceof o?n.centerAt(v.geometry):v.geometry instanceof a&&n.setExtent(v.geometry.getExtent()),(R=v.geometry instanceof o?v.geometry:v.geometry instanceof a?v.geometry.getPoint(0,0):null)&&i.show(R),i.setFeatures(f.concat(p)),[2]):(d&&d.length&&(b=d.map((function(e){var t=e.attributes,r=t.routeId,n=t.status;return"".concat(r,": ").concat(n)})).join("\n"),alert(b)),[2])}}))}))}))})),p.appendChild(y)}}.apply(t,n),void 0===o||(e.exports=o)},626:(e,t,r)=>{var n,o;n=[r,t,r(655),r(628),r(776),r(808),r(205)],o=function(e,t,r,n,o,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeasureToGeometryControl=void 0;var u=function(){function e(e,t){var u,s,c=this;this.mapServiceUrl=e,this.layerId=t,this.form=document.createElement("form"),this.form.classList.add("measure-to-geometry-form"),this.form.action=(0,i.getLrsServerEndpointUrl)(e,t,"measureToGeometry");var l=/^\d{1,5}$/;function d(){var e=parseInt(p.value,10),t=m.value.match(l);if(t){var r=parseInt(t[0],10),n="".concat(1e5*(53e3+e)+r);y.value=n}else y.value=""}var f=document.createDocumentFragment(),p=document.createElement("select");p.appendChild((0,o.createCountyOptions)()),p.required=!0,p.title="Select a county",p.id=(0,i.generateId)("countySelect");var m=document.createElement("input");m.id=(0,i.generateId)("roadNumber"),m.required=!0,m.pattern=l.source,m.title="Enter a one- to five-digit road number",[p,m].forEach((function(e){e.addEventListener("change",d)}));var y=document.createElement("input");y.id=(0,i.generateId)("m2gRouteIdInput"),y.name="routeId",y.type="hidden",y.required=!0,y.pattern=a.crabRouteIdRe.source,f.appendChild(y);var h=document.createElement("input");h.id=(0,i.generateId)("m2gFromMeasureInput"),h.name="measure",h.title="begin measure in miles",h.required=!0;var v=document.createElement("input");v.id=(0,i.generateId)("m2gToMeasureField"),v.name="toMeasure",v.title="end measure in miles",v.placeholder="Please omit if not locating a line segment.",v.required=!1;try{for(var R=r.__values([h,v]),b=R.next();!b.done;b=R.next()){var S=b.value;S.type="number",S.step="0.001"}}catch(e){u={error:e}}finally{try{b&&!b.done&&(s=R.return)&&s.call(R)}finally{if(u)throw u.error}}var E=document.createElement("input");E.type="date",E.id=(0,i.generateId)("m2gTemporalViewDate"),E.name="temporalViewDate",(0,i.addNamedControlsToElement)(f,{County:p,"Road No.":m,"From Milepost":h,"To Milepost":v,"Temporal View Date":E}),this.routeIdInput=y,this.fromMeasureInput=h,this.toMeasureInput=v,this.temporalViewDateInput=E;var g=document.createElement("button");g.type="submit",g.textContent="Submit",f.appendChild(g);var w=document.createElement("button");w.type="reset",w.textContent="Reset",f.appendChild(w),this.form.appendChild(f),this.form.addEventListener("submit",(function(e){var t=e.target,r=new n.LrsClient(c.form.action),o=c.temporalViewDateInput.value&&c.temporalViewDateInput.valueAsDate||void 0,a=r.measureToGeometry(c.layerId,c.locations,o,3857),i=new CustomEvent("m2gsubmit",{detail:a});t.dispatchEvent(i),e.preventDefault()}))}return Object.defineProperty(e.prototype,"temporalViewDate",{get:function(){return this.temporalViewDateInput.value?new Date(this.temporalViewDateInput.value):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"locations",{get:function(){var e=this.routeIdInput.value,t=parseFloat(this.fromMeasureInput.value),r=this.toMeasureInput.value?parseFloat(this.toMeasureInput.value):null;return["i","d"].map((function(n){return null===r?{routeId:e+n,measure:t}:{routeId:e+n,fromMeasure:t,toMeasure:r}}))},enumerable:!1,configurable:!0}),e}();t.MeasureToGeometryControl=u}.apply(t,n),void 0===o||(e.exports=o)},857:(e,t,r)=>{var n,o;n=[r,t,r(655),r(189)],o=function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSearchLink=t.NoMatchingSourceError=void 0,n=r.__importDefault(n);var o=function(e){function t(t,r){var n=e.call(this,"No source found in Search widget with name matching ".concat(r,"."))||this;return n.search=t,n.searchName=r,n}return r.__extends(t,e),t}(Error);t.NoMatchingSourceError=o,t.createSearchLink=function(e){var t=document.createElement("a");return t.textContent="Zoom to a county via the Search box to make CRAB routes visible",t.href="#",t.onclick=function(){var t=n.default.byId("search");try{if(e){(function(e,t){void 0===t&&(t=/County/i);var r=function(e,t){void 0===t&&(t=/County/i);for(var r=e.sources,n=0;n<r.length;n++){var o=r[n];if(t instanceof RegExp&&t.test(o.name)||t===o.name)return n}return null}(e,t);if(null==r)throw new o(e,t);e.set("activeSourceIndex",r)})(t,e),t.clear();var r=document.getElementById("search_menu_button");r&&r.click()}t.focus()}catch(e){e instanceof o?alert(e.message):console.error(e.message,e)}return!1},t}}.apply(t,n),void 0===o||(e.exports=o)},808:(e,t,r)=>{var n,o;n=[r,t,r(655)],o=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCrabRouteId=t.crabRouteIdRe=void 0,t.crabRouteIdRe=/^(53\d{3})(\d{5})([a-z])$/,t.parseCrabRouteId=function(e){if(!e)throw new TypeError("The routeId cannot be falsy. Must match the following RegExp:\n".concat(t.crabRouteIdRe));var n=e.match(t.crabRouteIdRe);if(!n)throw new Error("Invalid CRAB route ID: ".concat(e,". Must match ").concat(t.crabRouteIdRe));var o=r.__read(n.slice(1,3).map((function(e){if(e){var t=parseInt(e,10);if(!isNaN(t))return t}return e})),2);return{countyFipsCode:o[0],roadNumber:o[1],direction:n[3]}}}.apply(t,n),void 0===o||(e.exports=o)},868:(e,t,r)=>{var n,o;n=[r,t,r(737),r(486),r(296),r(35),r(861),r(693)],o=function(e,t,r,n,o,a,i,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crabLinesLayer=t.crabPointsLayer=void 0;var s=new u;s.setColor(new r("red"));var c=new a(s),l=new Array({name:"routeId",type:"esriFieldTypeString",alias:"Route ID"},{name:"status",type:"esriFieldTypeString",alias:"Locating Status"},{name:"measure",type:"esriFieldTypeDouble",alias:"Measure"});function d(e){var t={fieldName:e.name,label:e.alias||e.name,visible:"routeId"!==e.name};return/Double$/i.test(e.type)&&(t.format={places:3}),t}var f=l.map((function(e){var t=e.name,r=(e.alias,e.type);return"measure"===t?{name:t="fromMeasure",type:r,alias:"From Measure"}:e})).concat([{name:"toMeasure",type:"esriFieldTypeDouble",alias:"To Measure"}]),p={geometryType:"esriGeometryPoint",fields:l},m={geometry:"esriGeometryLine",fields:f},y=[{expression:'// Extract county identifier and convert to number.\n  var cid = Number(Mid($feature.RouteId, 2, 3))\n\n  // Return the county name corresponding to the county id.\n  Decode (\n      cid,\n      1, "Adams",\n      3, "Asotin",\n      5, "Benton",\n      7, "Chelan",\n      9, "Clallam",\n      11, "Clark",\n      13, "Columbia",\n      15, "Cowlitz",\n      17, "Douglas",\n      19, "Ferry",\n      21, "Franklin",\n      23, "Garfield",\n      25, "Grant",\n      27, "Grays Harbor",\n      29, "Island",\n      31, "Jefferson",\n      33, "King",\n      35, "Kitsap",\n      37, "Kittitas",\n      39, "Klickitat",\n      41, "Lewis",\n      43, "Lincoln",\n      45, "Mason",\n      47, "Okanogan",\n      49, "Pacific",\n      51, "Pend Oreille",\n      53, "Pierce",\n      55, "San Juan",\n      57, "Skagit",\n      59, "Skamania",\n      61, "Snohomish",\n      63, "Spokane",\n      65, "Stevens",\n      67, "Thurston",\n      69, "Wahkiakum",\n      71, "Walla Walla",\n      73, "Whatcom",\n      75, "Whitman",\n      77, "Yakima",\n      "Invalid"\n  )',name:"county",returnType:"string",title:"County"},{name:"roadNumber",expression:"Mid($feature.RouteId, 5, 5)",title:"County Road Number",returnType:"string"}],h=y.map((function(e){return{fieldName:"expression/".concat(e.name),label:e.title||e.name,visible:!0}})),v=new n({title:"Located CRAB Point",fieldInfos:h.concat(l.map(d)),expressionInfos:y}),R=new n({title:"Located CRAB Line Segment",fieldInfos:h.concat(f.map(d)),expressionInfos:y}),b=new o({layerDefinition:p,featureSet:null},{id:"CRAB Points"});t.crabPointsLayer=b,b.setInfoTemplate(v),b.setRenderer(c);var S=new o({layerDefinition:m,featureSet:null},{id:"CRAB Lines"});t.crabLinesLayer=S,S.setInfoTemplate(R);var E=new a(new i(i.STYLE_SOLID,new r("red"),3));S.setRenderer(E)}.apply(t,n),void 0===o||(e.exports=o)},128:(e,t,r)=>{var n,o;n=[r,t,r(655),r(301),r(626),r(205),r(389),r(857)],o=function(e,t,r,n,o,a,i,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r.__exportStar(n,t),r.__exportStar(o,t),r.__exportStar(a,t),r.__exportStar(i,t),r.__exportStar(u,t)}.apply(t,n),void 0===o||(e.exports=o)},205:(e,t,r)=>{var n,o;n=[r,t,r(655),r(457),r(962),r(36),r(89)],o=function(e,t,r,n,o,a,i){"use strict";function u(e){if(!e)return null;for(var t=/[A-Z]?[a-z]+/g,r=t.exec(e),n=new Array;r;){var o=r[0].toLowerCase();n.push(o),r=t.exec(e)}return n.join(" ")}function s(e,t,r){var n=document.createElement("label");return n.htmlFor=t.id,n.textContent=r||u(t.name),t.required&&n.classList.add("required"),e.appendChild(n),e.appendChild(t),n}Object.defineProperty(t,"__esModule",{value:!0}),t.m2gOutputToFeatures=t.IterateG2MOutputToFeatures=t.addToFormWithLabel=t.addNamedControlsToElement=t.splitName=t.generateId=t.getLrsServerEndpointUrl=t.defaultLayerId=t.defaultLrsSvcUrl=t.defaultLrsMapServiceUrl=void 0,t.defaultLrsMapServiceUrl="https://data.wsdot.wa.gov/arcgis/rest/services/CountyRoutes/CRAB_Routes/MapServer",t.defaultLrsSvcUrl="".concat(t.defaultLrsMapServiceUrl,"/exts/LRSServer"),t.defaultLayerId=0,t.getLrsServerEndpointUrl=function(e,t,r){if(!e.match(/^(?:https?:)?\/\/.+\/(Map|Feature)Server\b/i))throw Error('URL is not in expected format: "'.concat(e,'".'));return"".concat(e,"/exts/LRSServer/").concat(t,"/").concat(r)},t.generateId=function(e){for(var t=e,r=0;document.getElementById(t);)t="".concat(e).concat(r),r++;return t},t.splitName=u,t.addNamedControlsToElement=function(e,t){var r={};for(var n in t)if(t.hasOwnProperty(n)){var o=s(e,t[n],n);r[n]=o}return r},t.addToFormWithLabel=s,t.IterateG2MOutputToFeatures=function(e){var t,n,u,s,c,l,d,f,p,m,y,h,v,R,b,S,E,g,w,U,L,D;return r.__generator(this,(function(I){switch(I.label){case 0:new Intl.NumberFormat("en-US",{maximumFractionDigits:3}),t=e.locations,n=e.spatialReference,u=new i(n),I.label=1;case 1:I.trys.push([1,12,13,14]),s=r.__values(t),c=s.next(),I.label=2;case 2:if(c.done)return[3,11];l=c.value,d=l.results,f=l.status,I.label=3;case 3:I.trys.push([3,8,9,10]),L=void 0,p=r.__values(d),m=p.next(),I.label=4;case 4:return m.done?[3,7]:(y=m.value,h=y.routeId,v=y.measure,R=y.geometry,y.geometryType,b={status:f,routeId:h,measure:v},S=new o(R.x,R.y,u),[4,new a({geometry:S,attributes:b})]);case 5:I.sent(),I.label=6;case 6:return m=p.next(),[3,4];case 7:return[3,10];case 8:return E=I.sent(),L={error:E},[3,10];case 9:try{m&&!m.done&&(D=p.return)&&D.call(p)}finally{if(L)throw L.error}return[7];case 10:return c=s.next(),[3,2];case 11:return[3,14];case 12:return g=I.sent(),w={error:g},[3,14];case 13:try{c&&!c.done&&(U=s.return)&&U.call(s)}finally{if(w)throw w.error}return[7];case 14:return[2]}}))},t.m2gOutputToFeatures=function(e){var t,u,s,c,l,d,f,p,m,y,h,v,R,b,S,E,g,w,U,L;return r.__generator(this,(function(D){switch(D.label){case 0:t=e.locations,u=e.spatialReference,s=new i(u),D.label=1;case 1:D.trys.push([1,10,11,12]),c=r.__values(t),l=c.next(),D.label=2;case 2:return l.done?[3,9]:(d=l.value,f=d.routeId,p=d.status,d.geometry?[3,4]:[4,new a({attributes:{routeId:f,status:p}})]);case 3:return D.sent(),[3,8];case 4:return"esriGeometryPoint"!==d.geometryType?[3,6]:(m=d.geometry,y=m.x,h=m.y,v=m.m,b=new o(y,h,s),[4,new a({geometry:b,attributes:{routeId:f,status:p,measure:v}})]);case 5:return D.sent(),[3,8];case 6:return"esriGeometryPolyline"!==d.geometryType?[3,8]:((R=d.geometry).paths,R.hasM,(b=n.fromJson(d.geometry)).setSpatialReference(s),S=r.__read(function(e){if(!e.hasM)return[null,null];var t=e.paths[0][0][3]||null,r=e.paths[e.paths.length-1];return[t,r[r.length-1][3]||null]}(d.geometry),2),E=S[0],g=S[1],[4,new a({geometry:b,attributes:{routeId:f,status:p,fromMeasure:E,toMeasure:g}})]);case 7:D.sent(),D.label=8;case 8:return l=c.next(),[3,2];case 9:return[3,12];case 10:return w=D.sent(),U={error:w},[3,12];case 11:try{l&&!l.done&&(L=c.return)&&L.call(c)}finally{if(U)throw U.error}return[7];case 12:return[2]}}))}}.apply(t,n),void 0===o||(e.exports=o)},655:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__assign:()=>a,__asyncDelegator:()=>E,__asyncGenerator:()=>S,__asyncValues:()=>g,__await:()=>b,__awaiter:()=>l,__classPrivateFieldGet:()=>I,__classPrivateFieldSet:()=>_,__createBinding:()=>f,__decorate:()=>u,__exportStar:()=>p,__extends:()=>o,__generator:()=>d,__importDefault:()=>D,__importStar:()=>L,__makeTemplateObject:()=>w,__metadata:()=>c,__param:()=>s,__read:()=>y,__rest:()=>i,__spread:()=>h,__spreadArray:()=>R,__spreadArrays:()=>v,__values:()=>m});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var a=function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};function i(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function u(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function s(e,t){return function(r,n){t(r,n,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}s((n=n.apply(e,t||[])).next())}))}function d(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var f=Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function p(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||f(t,e,r)}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function v(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var a=arguments[t],i=0,u=a.length;i<u;i++,o++)n[o]=a[i];return n}function R(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function S(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),a=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){a.push([e,t,r,n])>1||u(e,t)}))})}function u(e,t){try{(r=o[e](t)).value instanceof b?Promise.resolve(r.value.v).then(s,c):l(a[0][2],r)}catch(e){l(a[0][3],e)}var r}function s(e){u("next",e)}function c(e){u("throw",e)}function l(e,t){e(t),a.shift(),a.length&&u(a[0][0],a[0][1])}}function E(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:b(e[n](t)),done:"return"===n}:o?o(t):t}:o}}function g(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=m(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var U=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function L(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&f(t,e,r);return U(t,e),t}function D(e){return e&&e.__esModule?e:{default:e}}function I(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function _(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}},48:e=>{"use strict";e.exports=u},189:e=>{"use strict";e.exports=r},737:e=>{"use strict";e.exports=c},89:e=>{"use strict";e.exports=i},486:e=>{"use strict";e.exports=l},962:e=>{"use strict";e.exports=o},130:e=>{"use strict";e.exports=s},457:e=>{"use strict";e.exports=n},36:e=>{"use strict";e.exports=a},296:e=>{"use strict";e.exports=d},231:t=>{"use strict";t.exports=e},35:e=>{"use strict";e.exports=f},861:e=>{"use strict";e.exports=p},693:e=>{"use strict";e.exports=m},362:e=>{"use strict";e.exports=t}},h={};function v(e){var t=h[e];if(void 0!==t)return t.exports;var r=h[e]={exports:{}};return y[e](r,r.exports,v),r.exports}return v.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return v.d(t,{a:t}),t},v.d=(e,t)=>{for(var r in t)v.o(t,r)&&!v.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},v.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),v.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},v(128)})()));
//# sourceMappingURL=main.js.map