<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!--The viewport meta tag is used to improve the presentation and behavior of the samples
      on iOS devices-->
    <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no" />
    <title>WSDOT Functional Classification Map</title>
    <link rel="stylesheet" type="text/css" media="screen" href="http://www.wsdot.wa.gov/media/styles/styles.css" />
    <link rel="stylesheet" type="text/css" media="print" href="http://www.wsdot.wa.gov/media/styles/print.css" />

    <link rel="stylesheet" type="text/css" href="http://serverapi.arcgisonline.com/jsapi/arcgis/2.2/js/dojo/dijit/themes/claro/claro.css" />
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.10/themes/base/jquery-ui.css" type="text/css" media="all" />
    <link rel="shortcut icon" href="http://www.wsdot.wa.gov/favicon.ico" />
    <style type="text/css">
        html, body
        {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            background: white;
        }
        #mainContainer
        {
            width: 100%;
            height: 100%;
            margin: 0;
        }
        #map
        {
            border: 1px solid #000;
            padding: 0;
        }
        #layerList *
        {
            list-style-type: none;
        }
        #toolbar1 
        {
            overflow: hidden;
        }
        #northArrow 
        {
            position: absolute;
            bottom: 20px;
            right: 20px;
            z-index: 10;
        }
        #wsdotLogo 
        {
			vertical-align: middle;
			padding: 10px;
        }
        h1 
        {
        	font-family: Arial,Helvetica,sans-serif;
			font-size: 18pt;
			font-weight: 900;
            display: inline;
        }
		.topNav {
			color: #ffffff;
			background-color: #017359;
		}
		.topNav ul {
			text-align: right;
			padding: 0px;
		}
		.topNav li {
			border-left-width: 1px;
			border-left-style: dotted;
			border-left-color: #ffffff;
			padding-left: 5px;
			padding-right: 5px;
			padding-top: 0px;
			padding-bottom: 0px;
			display: inline;
		}
		.topNav li:first-child {
			border: none;
		}
		
			.ui-autocomplete {
		max-height: 100px;
		overflow-y: auto;
		/* prevent horizontal scrollbar */
		overflow-x: hidden;
		/* add padding to account for vertical scrollbar */
		padding-right: 20px;
	}
	/* IE 6 doesn't support max-height
	 * we use height instead, but this forces the menu to always be this tall
	 */
	* html .ui-autocomplete {
		height: 100px;
	}


    </style>
    <link href="./style/legend.css" rel="stylesheet" />
</head>
<body class="claro">
    <noscript>
    You need to have JavaScript enabled on your browser to view this page.
    </noscript>
    <div id="mainContainer" dojotype="dijit.layout.BorderContainer" design="headline" gutters="false">
        <div id="headerPane" dojotype="dijit.layout.ContentPane" region="top">
        	<div class="topNav">
        		<ul>
					<li><a href="http://example.com">Contact Us</a></li>
					<li><a href="http://www.wsdot.wa.gov">WSDOT Home</a></li>
					<li><a href="#">Help</a></li>
        		</ul>
        	</div>
            <div id="logoAndTitle">
                <img id="wsdotLogo" src="http://www.wsdot.wa.gov/media/images/back/greenlogo.png" alt="WSDOT Logo" />
                <h1>WSDOT Functional Classification Map</h1>
            </div>
            
            <div id="toolbar1" dojotype="dijit.Toolbar">
                <div dojotype="dijit.form.DropDownButton" title="Switch Basemap">
                    <div>Switch Basemap</div>
                    <div dojotype="dijit.TooltipDialog">
                        <div id="basemapGallery">
                        </div>
                    </div>
                </div>
                <div dojotype="dijit.form.DropDownButton">
                    <div>Zoom to...</div>
                    <div dojotype="dijit.Menu">
                        <div onclick="map.setExtent(extents.fullExtent);" dojotype="dijit.MenuItem">Full Extent</div>
                        <div dojotype="dijit.PopupMenuItem">
                            <span>Counties</span>
                            <div dojotype="dijit.Menu">
                                <div dojotype="dijit.PopupMenuItem">
                                    <span>A-K</span>
                                    <div dojotype="dijit.Menu">
                                        <div id="AdamsZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Adams);" dojotype="dijit.MenuItem">Adams</div> 
                                        <div id="AsotinZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Asotin);" dojotype="dijit.MenuItem">Asotin</div> 
                                        <div id="BentonZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Benton);" dojotype="dijit.MenuItem">Benton</div> 
                                        <div id="ChelanZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Chelan);" dojotype="dijit.MenuItem">Chelan</div> 
                                        <div id="ClallamZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Clallam);" dojotype="dijit.MenuItem">Clallam</div> 
                                        <div id="ClarkZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Clark);" dojotype="dijit.MenuItem">Clark</div> 
                                        <div id="ColumbiaZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Columbia);" dojotype="dijit.MenuItem">Columbia</div> 
                                        <div id="CowlitzZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Cowlitz);" dojotype="dijit.MenuItem">Cowlitz</div> 
                                        <div id="DouglasZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Douglas);" dojotype="dijit.MenuItem">Douglas</div> 
                                        <div id="FerryZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Ferry);" dojotype="dijit.MenuItem">Ferry</div> 
                                        <div id="FranklinZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Franklin);" dojotype="dijit.MenuItem">Franklin</div> 
                                        <div id="GarfieldZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Garfield);" dojotype="dijit.MenuItem">Garfield</div> 
                                        <div id="GrantZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Grant);" dojotype="dijit.MenuItem">Grant</div> 
                                        <div id="Grays HarborZoomMenuItem" onclick="map.setExtent(extents.countyExtents['Grays Harbor']);" dojotype="dijit.MenuItem">Grays Harbor</div> 
                                        <div id="IslandZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Island);" dojotype="dijit.MenuItem">Island</div> 
                                        <div id="JeffersonZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Jefferson);" dojotype="dijit.MenuItem">Jefferson</div> 
                                        <div id="KingZoomMenuItem" onclick="map.setExtent(extents.countyExtents.King);" dojotype="dijit.MenuItem">King</div> 
                                        <div id="KitsapZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Kitsap);" dojotype="dijit.MenuItem">Kitsap</div> 
                                        <div id="KittitasZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Kittitas);" dojotype="dijit.MenuItem">Kittitas</div> 
                                        <div id="KlickitatZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Klickitat);" dojotype="dijit.MenuItem">Klickitat</div> 
                                    </div>
                                </div>
                                <div dojotype="dijit.PopupMenuItem">
                                    <span>L-Y</span>
                                    <div dojotype="dijit.Menu">
                                        <div id="LewisZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Lewis);" dojotype="dijit.MenuItem">Lewis</div> 
                                        <div id="LincolnZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Lincoln);" dojotype="dijit.MenuItem">Lincoln</div> 
                                        <div id="MasonZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Mason);" dojotype="dijit.MenuItem">Mason</div> 
                                        <div id="OkanoganZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Okanogan);" dojotype="dijit.MenuItem">Okanogan</div> 
                                        <div id="PacificZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Pacific);" dojotype="dijit.MenuItem">Pacific</div> 
                                        <div id="Pend OreilleZoomMenuItem" onclick="map.setExtent(extents.countyExtents['Pend Oreille']);" dojotype="dijit.MenuItem">Pend Oreille</div> 
                                        <div id="PierceZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Pierce);" dojotype="dijit.MenuItem">Pierce</div> 
                                        <div id="San JuanZoomMenuItem" onclick="map.setExtent(extents.countyExtents['San Juan']);" dojotype="dijit.MenuItem">San Juan</div> 
                                        <div id="SkagitZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Skagit);" dojotype="dijit.MenuItem">Skagit</div> 
                                        <div id="SkamaniaZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Skamania);" dojotype="dijit.MenuItem">Skamania</div> 
                                        <div id="SnohomishZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Snohomish);" dojotype="dijit.MenuItem">Snohomish</div> 
                                        <div id="SpokaneZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Spokane);" dojotype="dijit.MenuItem">Spokane</div> 
                                        <div id="StevensZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Stevens);" dojotype="dijit.MenuItem">Stevens</div> 
                                        <div id="ThurstonZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Thurston);" dojotype="dijit.MenuItem">Thurston</div> 
                                        <div id="WahkiakumZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Wahkiakum);" dojotype="dijit.MenuItem">Wahkiakum</div> 
                                        <div id="Walla WallaZoomMenuItem" onclick="map.setExtent(extents.countyExtents['Walla Walla']);" dojotype="dijit.MenuItem">Walla Walla</div> 
                                        <div id="WhatcomZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Whatcom);" dojotype="dijit.MenuItem">Whatcom</div> 
                                        <div id="WhitmanZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Whitman);" dojotype="dijit.MenuItem">Whitman</div> 
                                        <div id="YakimaZoomMenuItem" onclick="map.setExtent(extents.countyExtents.Yakima);" dojotype="dijit.MenuItem">Yakima</div> 
                                    </div>
                                </div>



                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="map" dojotype="dijit.layout.ContentPane" region="center" style="position: absolute;  top: 0px; right: 0px;"></div>
        <div id="legendPane" dojotype="dijit.layout.ContentPane" style="width:250px" region="left" splitter="true">
            
                <table id="fcLegend" class="legend alternatingLines">
                    <caption>Functional Class</caption>
                    <thead><tr><th></th><th>Rural</th><th>Urban</th><th></th></tr></thead>
                    <tbody>
                        <tr><td><img src='images/legend/Interstate.png' alt='interstate' /></td><td>01</td><td>11</td><td>Interstate</td></tr>
                        <tr><td><img src='images/legend/otherFwyExpwy.png' alt='otherFwyExpwy' /></td><td></td><td>12</td><td>Other Fwy Expwy</td></tr>
                        <tr><td><img src='images/legend/otherPrincipalArterial.png' alt='otherPrincipalArterial' /></td><td>02</td><td>14</td><td>Other Principal Arterial</td></tr>
                        <tr><td><img src='images/legend/minorArterial.png' alt='minorArterial' /></td><td>06</td><td>16</td><td>Minor Arterial</td></tr>
                        <tr><td><img src='images/legend/majorCollector.png' alt='majorCollector' /></td><td>07</td><td></td><td>Major Collector</td></tr>
                        <tr><td><img src='images/legend/majorCollector.png' alt='majorCollector' /></td><td></td><td>17</td><td>Collector</td></tr>
                        <tr><td><img src='images/legend/minorCollector.png' alt='minorCollector' /></td><td>08</td><td></td><td>Minor Collector</td></tr>

                        <tr><td><img src='images/legend/proposedOtherFwyExpwy.png' alt='proposedOtherFwyExpwy' /></td><td></td><td>32</td><td>Proposed Other Fwy Expwy</td></tr>
                        <tr><td><img src='images/legend/proposedOtherPrincipalArterial.png' alt='proposedOtherPrincipalArterial' /></td><td>22</td><td>34</td><td>Proposed Other Principal Arterial</td></tr>
                        <tr><td><img src='images/legend/proposedMinorArterial.png' alt='proposedMinorArterial' /></td><td>26</td><td>36</td><td>Proposed Minor Arterial</td></tr>
                        <tr><td><img src='images/legend/proposedMajorCollector.png' alt='proposedMajorCollector' /></td><td>27</td><td>37</td><td>Proposed Major Collector</td></tr>
                        <tr><td><img src='images/legend/proposedMinorCollector.png' alt='proposedMinorCollector' /></td><td>28</td><td></td><td>Proposed Minor Collector</td></tr>
                    </tbody>
                </table>
            

            <table id="basemapLegend" class="legend">
                <caption>Other</caption>
                <thead><tr><th></th><th></th><th>Zoom To</th></tr></thead>
                <tbody>
                    <tr>
                        <td><img src="images/legend/CityBoundaries.png" alt="City Boundaries symbol" /></td>
                        <td>City Boundaries</td>
                        <td><input id="cityZoomSelect" /></td>
                    </tr>
                    <tr>
                        <td><img src="images/legend/UrbanizedArea.png" alt="UrbanizedArea symbol" /></td>
                        <td>Urbanized Area</td>
                        <td><input id="urbanAreaZoomSelect" /></td>
                    </tr>
                </tbody>
            </table>
            
        </div>
    </div>
        <script type="text/javascript">
            var djConfig = {
                parseOnLoad: true
            };
    </script>
    <script type="text/javascript" src="http://serverapi.arcgisonline.com/jsapi/arcgis/?v=2.2"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js" type="text/javascript"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.10/jquery-ui.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        dojo.require("dijit.dijit"); // optimize: load dijit layer
        dojo.require("dijit.layout.BorderContainer");
        dojo.require("dijit.layout.TabContainer");
        dojo.require("dijit.layout.ContentPane");
        dojo.require("dijit.Toolbar");
        dojo.require("dijit.form.DropDownButton");
        dojo.require("dijit.Dialog");
        dojo.require("dijit.Menu");
        dojo.require("dijit.form.CheckBox");
        dojo.require("dijit.form.FilteringSelect");
        dojo.require("dojo.data.ItemFileReadStore");

        dojo.require("dojo.parser");

        dojo.require("esri.map");
        dojo.require("esri.virtualearth.VETiledLayer");
        dojo.require("esri.dijit.BasemapGallery");
        dojo.require("esri.arcgis.utils");
        dojo.require("esri.dijit.Legend");
        dojo.require("esri.dijit.Scalebar");
        dojo.require("esri.tasks.query");

        var map = null;
        var extents = null;
        var hpmsLayer;

        //function handleLayerCheckboxClick() {
        //    // Get all of the checked checkboxes.
        //    var checkedBoxes = dojo.query("[id^=layer]:checked");
        //    var regex = /layer(\d+)checkbox/i
        //    var visibleLayers = dojo.map(checkedBoxes, function(item, index, array) { return Number(item.id.match(regex)[1]); });
        //    hpmsLayer.setVisibleLayers(visibleLayers);
        //    hpmsLayer.refresh();
        //}

        function setupNorthArrow() {
            // Create the north arrow.
            dojo.create("img", { id: "northArrow", src: "images/NorthArrow.png", alt: "North Arrow" }, "map_root", "last");
        }

        function init() {
            var initExtent = new esri.geometry.Extent({
                "xmin": -13938444.981854893,
                "ymin": 5800958.950617068,
                "ymax": 6257746.631649259,
                "xmax": -12960051.019804686,
                "spatialReference": {
                    "wkid": 102100
                }
            });

            // Define zoom extents for menu.
            extents = {
                fullExtent: new esri.geometry.Extent({ "xmin": -14058520.2360666, "ymin": 5539437.0343901999, "ymax": 6499798.1008670302, "xmax": -12822768.6769759, "SpatialReference": { "wkid": 102100} }),
                countyExtents: { "Cowlitz": { "xmin": -13716608.1772, "ymin": 5756446.5261, "xmax": -13607638.501, "ymax": 5842754.0508 }, "Whitman": { "xmin": -13163464.6711, "ymin": 5847392.8245, "xmax": -13028774.4496, "ymax": 5984725.1359 }, "Spokane": { "xmin": -13116067.9387, "ymin": 5984489.784, "xmax": -13028809.6233, "ymax": 6114814.6868 }, "Okanogan": { "xmin": -13456929.5548, "ymin": 6097022.1384, "xmax": -13228768.0346, "ymax": 6274958.9602 }, "Whatcom": { "xmin": -13728170.447, "ymin": 6211586.2765, "xmax": -13431350.2501, "ymax": 6275274.979 }, "King": { "xmin": -13641277.0042, "ymin": 5955853.9667, "xmax": -13477001.0149, "ymax": 6070428.8593 }, "Kittitas": { "xmin": -13521532.7745, "ymin": 5899113.9835, "xmax": -13350070.2043, "ymax": 6040226.1383 }, "Yakima": { "xmin": -13527887.9391, "ymin": 5786789.6607, "xmax": -13343374.1361, "ymax": 5956573.2746 }, "Columbia": { "xmin": -13162673.7586, "ymin": 5780181.9819, "xmax": -13091540.6017, "ymax": 5881022.6956 }, "Skagit": { "xmin": -13666072.6368, "ymin": 6156232.4448, "xmax": -13434716.5579, "ymax": 6216862.0714 }, "Wahkiakum": { "xmin": -13773334.2204, "ymin": 5803187.7205, "xmax": -13716034.4264, "ymax": 5842274.2847 }, "San Juan": { "xmin": -13722118.9812, "ymin": 6154236.6866, "xmax": -13659272.347, "ymax": 6246272.0081 }, "Jefferson": { "xmin": -13883451.6533, "ymin": 6026992.6909, "xmax": -13647254.6175, "ymax": 6168652.2854 }, "Lewis": { "xmin": -13733788.4441, "ymin": 5842022.6891, "xmax": -13508975.7523, "ymax": 5908584.5364 }, "Ferry": { "xmin": -13232547.6219, "ymin": 6078547.14, "xmax": -13147311.3041, "ymax": 6274878.086 }, "Pend Oreille": { "xmin": -13094470.0429, "ymin": 6114408.5894, "xmax": -13027916.5477, "ymax": 6274942.0713 }, "Franklin": { "xmin": -13297953.5226, "ymin": 5811290.5149, "xmax": -13157743.3914, "ymax": 5899593.8738 }, "Walla Walla": { "xmin": -13251654.4058, "ymin": 5780326.7638, "xmax": -13134753.0631, "ymax": 5878116.3164 }, "Lincoln": { "xmin": -13244769.7727, "ymin": 5984619.1827, "xmax": -13115603.0047, "ymax": 6099856.8495 }, "Benton": { "xmin": -13344617.6406, "ymin": 5754139.5511, "xmax": -13240449.8207, "ymax": 5897751.643 }, "Clark": { "xmin": -13669582.7159, "ymin": 5707531.0819, "xmax": -13608198.7464, "ymax": 5789926.0889 }, "Pierce": { "xmin": -13675925.5501, "ymin": 5897856.0581, "xmax": -13511306.3151, "ymax": 6008212.5148 }, "Klickitat": { "xmin": -13537868.9285, "ymin": 5717448.7451, "xmax": -13343404.634, "ymax": 5787581.0243 }, "Grant": { "xmin": -13363106.9209, "ymin": 5881154.2164, "xmax": -13243995.6844, "ymax": 6100566.8755 }, "Chelan": { "xmin": -13489786.8267, "ymin": 5984760.3314, "xmax": -13342761.5943, "ymax": 6198989.41 }, "Thurston": { "xmin": -13714908.1752, "ymin": 5903319.5991, "xmax": -13603589.1089, "ymax": 5973834.5544 }, "Clallam": { "xmin": -13899444.6403, "ymin": 6084703.4441, "xmax": -13680883.6168, "ymax": 6189343.3633 }, "Douglas": { "xmin": -13393771.1496, "ymin": 5978080.6643, "xmax": -13241520.921, "ymax": 6132044.942 }, "Stevens": { "xmin": -13180410.3388, "ymin": 6072370.4054, "xmax": -13072245.7038, "ymax": 6274987.4244 }, "Adams": { "xmin": -13288154.3124, "ymin": 5898997.675, "xmax": -13131174.6649, "ymax": 5984917.9955 }, "Pacific": { "xmin": -13823107.8933, "ymin": 5818061.0061, "xmax": -13732083.3359, "ymax": 5908563.6219 }, "Island": { "xmin": -13677515.936, "ymin": 6078202.9272, "xmax": -13617553.3997, "ymax": 6176489.1526 }, "Kitsap": { "xmin": -13696574.1685, "ymin": 6008153.0256, "xmax": -13628515.5078, "ymax": 6102333.7942 }, "Garfield": { "xmin": -13120489.3456, "ymin": 5779994.9236, "xmax": -13049763.0779, "ymax": 5893758.4025 }, "Mason": { "xmin": -13748635.6001, "ymin": 5955512.1077, "xmax": -13670052.185, "ymax": 6041803.2531 }, "Grays Harbor": { "xmin": -13856990.0768, "ymin": 5908013.6975, "xmax": -13709928.0411, "ymax": 6029660.264 }, "Asotin": { "xmin": -13077814.2164, "ymin": 5779598.1341, "xmax": -13014945.7855, "ymax": 5854737.304 }, "Skamania": { "xmin": -13608832.7415, "ymin": 5708314.0933, "xmax": -13526920.5016, "ymax": 5842848.1259 }, "Snohomish": { "xmin": -13632030.2268, "ymin": 6069562.9349, "xmax": -13459351.7812, "ymax": 6156742.2548} },
                cityExtents: {items: []},
                urbanAreaExtents: {items: []}
            };

            // Convert the county JSON objects into esri.geomtry.Extents.
            for (var i in extents.countyExtents) {
                extents.countyExtents[i] = new esri.geometry.fromJson(extents.countyExtents[i]);
            }

            map = new esri.Map("map", {
                logo: false,
                extent: initExtent,
                lods: [
		          { "level": 1, "resolution": 1222.99245256249, "scale": 4622324.434309 },
		          { "level": 2, "resolution": 611.49622628138, "scale": 2311162.217155 },
		          { "level": 3, "resolution": 305.748113140558, "scale": 1155581.108577 },
		          { "level": 4, "resolution": 152.874056570411, "scale": 577790.554289 },
		          { "level": 5, "resolution": 76.4370282850732, "scale": 288895.277144 },
		          { "level": 6, "resolution": 38.2185141425366, "scale": 144447.638572 },
		          { "level": 7, "resolution": 19.1092570712683, "scale": 72223.819286 },
		          { "level": 8, "resolution": 9.55462853563415, "scale": 36111.909643 },
		          { "level": 9, "resolution": 4.77731426794937, "scale": 18055.954822 },
		          { "level": 10, "resolution": 2.38865713397468, "scale": 9027.977411 },
		          { "level": 11, "resolution": 1.19432856685505, "scale": 4513.988705 }

		        ]
            });
            var initBasemap = new esri.layers.ArcGISDynamicMapServiceLayer("http://hqolymgis11t/ArcGIS/rest/services/HPMS/WSDOTFunctionalClassBaseMap/MapServer");
            map.addLayer(initBasemap);
            hpmsLayer = new esri.layers.ArcGISDynamicMapServiceLayer("http://hqolymgis11t/ArcGIS/rest/services/HPMS/HPMS/MapServer", { id: "hpms" });
            map.addLayer(hpmsLayer);


            setupNorthArrow();
            var scalebar = new esri.dijit.Scalebar({ map: map, attachTo: "bottom-left" });


            createBasemapGallery();
            dojo.connect(dijit.byId('map'), 'resize', resizeMap);


            // Setup extents for cities and urbanized area zoom tools.

            //var citySelect = new dijit.form.FilteringSelect({}, "cityZoomSelect");

            var cityQueryTask = new esri.tasks.QueryTask("http://hqolymgis11t/ArcGIS/rest/services/HPMS/WSDOTFunctionalClassBaseMap/MapServer/23");
            var query = new esri.tasks.Query();
            query.where = "1 = 1";
            query.returnGeometry = true;
            query.outFields = ["NAME"];
            var cityExtents = [];
            cityQueryTask.execute(query, function (featureSet) {
                var graphic;
                var name;
                var option
                for (var i in featureSet.features) {
                    graphic = featureSet.features[i];
                    name = graphic.attributes["NAME"];
                    cityExtents.push({ label: name, extent: graphic.geometry.getExtent() });
                }
                $("#cityZoomSelect").autocomplete({
                    source: cityExtents,
                    select: function (event, ui) {
                        map.setExtent(ui.item.extent);
                        return false;
                    }

                });
            });


            var urbanAreaQueryTask = new esri.tasks.QueryTask("http://hqolymgis11t/ArcGIS/rest/services/HPMS/WSDOTFunctionalClassBaseMap/MapServer/24");
            query.where = "1 = 1";
            query.returnGeometry = true;
            var urbanAreaExtents = [];
            urbanAreaQueryTask.execute(query, function (featureSet) {
                var graphic;
                var name;
                for (var i in featureSet.features) {
                    graphic = featureSet.features[i];
                    name = graphic.attributes["NAME"];
                    urbanAreaExtents.push({
                        label: name,
                        extent: graphic.geometry.getExtent()
                    });
                }
                $("#urbanAreaZoomSelect").autocomplete({
                    source: urbanAreaExtents,
                    select: function (event, ui) {
                        map.setExtent(ui.item.extent);
                    }

                });
            });
        }

        function createBasemapGallery() {
            var basemapLayers =
            {
                cities: new esri.dijit.BasemapLayer({ url: "http://hqolymgis11t/ArcGIS/rest/services/HPMS/Cities/MapServer" }),
                counties: new esri.dijit.BasemapLayer({ url: "http://hqolymgis11t/ArcGIS/rest/services/HPMS/CountyBoundariesNoMaplex/MapServer" })
            };

            var basemaps = [
                new esri.dijit.Basemap({
                    id : "fcBasemap",
                    layers: [
                            new esri.dijit.BasemapLayer({ url: "http://hqolymgis11t/ArcGIS/rest/services/HPMS/WSDOTFunctionalClassBaseMap/MapServer" })
                        ],
                    thumbnailUrl: "images/HpmsBasemapThumbnail.png",
                    title: "Functional Class Basemap"
                })
                ,
                new esri.dijit.Basemap({
                    layers: [
                        new esri.dijit.BasemapLayer({ url: "http://hqolymgis17p/ArcGIS/rest/services/WSDOTBaseMap/WSDOTBaseMap/MapServer" })
                    ],
                    thumbnailUrl: "images/WsdotBasemapThumbnail.jpg",
                    title: "WSDOT Basemap"
                }),
                new esri.dijit.Basemap({
                    layers: [
                        basemapLayers.cities,
                        basemapLayers.counties,
                        new esri.dijit.BasemapLayer({ url: "http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer" })
                    ],
                    thumbnailUrl: "http://www.arcgis.com/sharing/content/items/c03a526d94704bfb839445e80de95495/info/thumbnail/imagery.jpg",
                    title: "ESRI Imagery"
                }),
                new esri.dijit.Basemap({
                    layers: [
                        new esri.dijit.BasemapLayer({url: "http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"}),
                        new esri.dijit.BasemapLayer({ url: "http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer" })
                    ],
                    thumbnailUrl: "http://www.arcgis.com/sharing/content/items/716b600dbbac433faa4bec9220c76b3a/info/thumbnail/imagery_labels.jpg",
                    title: "ESRI Imagery w/ Labels"
                }),
                new esri.dijit.Basemap({
                    layers: [
                        basemapLayers.cities,
                        basemapLayers.counties,
                        new esri.dijit.BasemapLayer({ url: "http://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer" })
                    ],
                    thumbnailUrl: "http://www.arcgis.com/sharing/content/items/11742666e55b45b8a508751532d0c1ea/info/thumbnail/terrain.jpg",
                    title: "ESRI Terrain"
                }),
            //new esri.dijit.Basemap({
            //    layers: [
            //        basemapLayers.cities,
            //        basemapLayers.counties,
            //        new esri.dijit.BasemapLayer({ type: "BingMapsAerial" })
            //    ],
            //    thumbnailUrl: "http://www.arcgis.com/sharing/content/items/677cd0c509d842a98360c46186a2768e/info/thumbnail/bing_aerial.jpg",
            //    title: "Bing Maps Imagery"
            //}),
                new esri.dijit.Basemap({
                    layers: [
                        basemapLayers.cities,
                        basemapLayers.counties
                    ],

                    title: "Counties and Cities Only"
                })

            ];
            var basemapGallery = new esri.dijit.BasemapGallery({
                showArcGISBasemaps: false,
                //bingMapsKey: 'Av1bH4keF8rXBtxWOegklgWGCYYz8UGYvBhsWKuvc4Z15kT76xVFOERk8jkKEDvT',
                basemaps: basemaps,
                map: map
            }, "basemapGallery");

            basemapGallery.startup();

            dojo.connect(basemapGallery, "onError", function (msg) { console.log(msg); });

            // Set up code to hide or display basemap-specific legends.
            dojo.connect(basemapGallery, "onSelectionChange", function () {
                var basemap = basemapGallery.getSelected();
                if (basemap.id === "fcBasemap") {
                    dojo.removeClass("basemapLegend", "hidden");
                }
                else {
                    dojo.addClass("basemapLegend", "hidden");

                }
            });
        }

        function resizeMap() {
            //resize the map when the browser resizes - view the 'Resizing and repositioning the map' section in
            //the following help topic for more details http://help.esri.com/EN/webapi/javascript/arcgis/help/jshelp_start.htm#jshelp/inside_guidelines.htm
            var resizeTimer;
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(function () {
                map.resize();
                map.reposition();
            }, 500);
        }

        //show map on load
        dojo.addOnLoad(init);
    </script>
</body>
</html>
